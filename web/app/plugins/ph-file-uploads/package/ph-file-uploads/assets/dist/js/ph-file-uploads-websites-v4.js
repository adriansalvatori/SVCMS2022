!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=50)}([function(t,e,n){"use strict";function r(t,e,n,r,i,a,o,s){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var d=c.render;c.render=function(t,e){return u.call(e),d(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:c}}n.d(e,"a",function(){return r})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){var n="Expected a function",r="__lodash_hash_undefined__",i=1/0,a="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,d=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,_=p||m||Function("return this")();var v,y=Array.prototype,b=Function.prototype,g=Object.prototype,$=_["__core-js_shared__"],w=(v=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",j=b.toString,C=g.hasOwnProperty,O=g.toString,A=RegExp("^"+j.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=_.Symbol,S=y.splice,M=R(_,"Map"),T=R(Object,"create"),E=x?x.prototype:void 0,k=E?E.toString:void 0;function D(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function P(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function F(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function I(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function L(t,e){for(var n,r=0,i=(e=function(t,e){if(V(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||H(t))return!0;return c.test(t)||!u.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:V(n=e)?n:z(n)).length;null!=t&&r<i;)t=t[B(e[r++])];return r&&r==i?t:void 0}function U(t){return!(!X(t)||(e=t,w&&w in e))&&(function(t){var e=X(t)?O.call(t):"";return e==a||e==o}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?A:h).test(function(t){if(null!=t){try{return j.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function N(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function R(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return U(n)?n:void 0}D.prototype.clear=function(){this.__data__=T?T(null):{}},D.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},D.prototype.get=function(t){var e=this.__data__;if(T){var n=e[t];return n===r?void 0:n}return C.call(e,t)?e[t]:void 0},D.prototype.has=function(t){var e=this.__data__;return T?void 0!==e[t]:C.call(e,t)},D.prototype.set=function(t,e){return this.__data__[t]=T&&void 0===e?r:e,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(t){var e=this.__data__,n=I(e,t);return!(n<0||(n==e.length-1?e.pop():S.call(e,n,1),0))},P.prototype.get=function(t){var e=this.__data__,n=I(e,t);return n<0?void 0:e[n][1]},P.prototype.has=function(t){return I(this.__data__,t)>-1},P.prototype.set=function(t,e){var n=this.__data__,r=I(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},F.prototype.clear=function(){this.__data__={hash:new D,map:new(M||P),string:new D}},F.prototype.delete=function(t){return N(this,t).delete(t)},F.prototype.get=function(t){return N(this,t).get(t)},F.prototype.has=function(t){return N(this,t).has(t)},F.prototype.set=function(t,e){return N(this,t).set(t,e),this};var z=G(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(H(t))return k?k.call(t):"";var e=t+"";return"0"==e&&1/t==-i?"-0":e}(e);var n=[];return d.test(t)&&n.push(""),t.replace(l,function(t,e,r,i){n.push(r?i.replace(f,"$1"):e||t)}),n});function B(t){if("string"==typeof t||H(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}function G(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(n);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o),o};return r.cache=new(G.Cache||F),r}G.Cache=F;var V=Array.isArray;function X(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function H(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&O.call(t)==s}t.exports=function(t,e,n){var r=null==t?void 0:L(t,e);return void 0===r?n:r}}).call(this,n(1))},,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(2),a=(r=i)&&r.__esModule?r:{default:r};e.default={computed:{accepts:function(){return PHF_Settings.types}},methods:{addFile:function(){(0,a.default)(this,"$me.id")?this.$refs.file.click():ph.store.commit("ui/SET_DIALOG",{name:"register",success:this.addFile})},uploadImage:function(t){this.$refs.file.files&&(this.$emit("upload",this.$refs.file.files),this.$refs.file.value="")}}}},function(t,e,n){"use strict";n.r(e);var r=n(14),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(56));i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"threadAttachment",components:{ThreadAttachment:r.default},props:{id:Number|String},computed:{thread:function(){return this.$store.getters["entities/website-threads/find"](this.id)}}}},function(t,e,n){"use strict";n.r(e);var r=n(16),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=s(n(2)),a=s(n(36)),o=s(n(37));function s(t){return t&&t.__esModule?t:{default:t}}e.default={props:{id:Number|String,thread:Object},components:{Attachment:a.default,AttachmentLoading:o.default},data:function(){return{progress:100}},mounted:function(){console.log(this.thread),this.loaded||this.upload()},computed:{media:function(){return this.$store.getters["entities/media/find"](this.id)},loaded:function(){return this.media&&_.isNumber(this.media.id)},canDelete:function(){return!!this.loaded&&((0,i.default)(this,"$store.state.entities.users.me.id")==this.media.author||!!(0,i.default)(this,"$store.state.entities.users.me.capabilities.moderate_comments"))}},methods:{confirmTrash:function(){this.$store.commit("ui/SET_DIALOG",{name:"dialog",title:this.__("Permanently delete this upload?","project-huddle"),message:"<p>"+this.__("Are you sure you want to delete this file? This is permanent.","project-huddle")+"</p>",success:this.trash})},trash:function(){var t=this,e=(0,i.default)(this.media,"_links.self[0].href");this.remove(),e&&this.$http.delete(e,{params:{force:!0}}).then(function(e){r(e,1)[0];t.$notification({text:t.__("Attachment deleted.","project-huddle"),duration:5e3})}).catch(function(e){t.$store.dispatch("entities/insert",{entity:"media",data:attachment}),t.$error(e)})},upload:function(){var t=this;if(this.thread.$update({disabled:!0}),this.progress=0,this.media&&this.media.file){var e=new FormData,n={file:this.media.file};this.media.post&&(n.post=this.media.post),_.each(n,function(t,n){e.append(n,t)}),this.$http.post("/media",{data:e,options:{async:!0,cache:!1,contentType:!1,processData:!1,xhr:function(){var e=jQuery.ajaxSettings.xhr();return e.upload.onprogress=function(e){e.lengthComputable&&(t.progress=e.loaded/e.total*100)},e.upload.onload=function(){t.progress=100},e}}}).then(function(e){var n=r(e,1)[0];t.progress=100,t.$store.dispatch("entities/insertOrUpdate",{entity:"media",data:n}).then(function(){t.replace(n.id)})}).catch(function(e){t.$error(e),t.media.$delete()}).finally(function(){t.thread.$update({disabled:!1})})}},replace:function(t){var e=this,n=_.without(this.thread.attachment_ids,this.media.id);n.push(t),this.thread.$update({attachment_ids:n}).then(function(){e.media.$delete()})},remove:function(){var t=this,e=_.without(this.thread.attachment_ids,this.media.id);this.thread.$update({attachment_ids:e}).then(function(){t.media.$delete()})}}}},function(t,e,n){"use strict";n.r(e);var r=n(18),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(2)),i=a(n(57));function a(t){return t&&t.__esModule?t:{default:t}}e.default={props:{id:Number,media:Object,progress:Number,canDelete:Boolean},computed:{sourceUrl:function(){return(0,r.default)(this,"media.source_url")},url:function(){return(0,r.default)(this,"media.media_details.sizes.thumbnail.source_url")},extension:function(){return this.sourceUrl&&(0,i.default)(this.sourceUrl)},title:function(){return(0,r.default)(this,"media.title.rendered")}}}},function(t,e,n){"use strict";n.r(e);var r=n(20),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{progress:Number}}},function(t,e,n){"use strict";n.r(e);var r=n(22),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(60),a=(r=i)&&r.__esModule?r:{default:r};e.default={components:{CommentAttachment:a.default},props:{comment:Object},computed:{attachment_ids:function(){return this.comment.attachment_ids}}}},function(t,e,n){"use strict";n.r(e);var r=n(24),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=i.a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=s(n(2)),a=s(n(36)),o=s(n(37));function s(t){return t&&t.__esModule?t:{default:t}}e.default={props:{id:Number,comment:Object},components:{Attachment:a.default,AttachmentLoading:o.default},computed:{media:function(){return this.$store.getters["entities/media/find"](this.id)},isAuthor:function(){return(0,i.default)(this,"$store.state.entities.users.me.id")==(0,i.default)(this,"media.author")},canModerate:function(){return(0,i.default)(this,"$store.state.entities.users.me.capabilities.moderate_comments")},canDelete:function(){return this.isAuthor||this.canModerate}},methods:{confirmTrash:function(){this.$store.commit("ui/SET_DIALOG",{name:"dialog",title:this.__("Permanently delete this upload?","project-huddle"),message:"<p>"+this.__("Are you sure you want to delete this file? This is permanent.","project-huddle")+"</p>",success:this.trash})},trash:function(){var t=this;this.comment.$dispatch("update",{where:this.comment.id,data:function(e){t.$delete(e.attachment_ids,_.indexOf(e.attachment_ids,t.media.id))}}),this.$parent.$forceUpdate(),this.comment.$dispatch("patch",{comment:this.comment,data:{attachment_ids:0===this.comment.attachment_ids.length?"":this.comment.attachment_ids}});var e=this.media,n=(0,i.default)(this.media,"_links.self[0].href");n&&this.$http.delete(n,{params:{force:!0}}).then(function(e){r(e,1)[0];t.$notification({text:t.__("Attachment deleted.","project-huddle"),duration:5e3})}).catch(function(n){t.$store.dispatch("entities/insert",{entity:"media",data:e}),t.$error(n)})}}}},,,,,function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ph-comment-attachment-container"},t._l(t.attachment_ids,function(e){return n("CommentAttachment",{key:e,staticClass:"ph-comment__attachment",attrs:{id:e,comment:t.comment}})}),1)},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ph-file-attachment-icon"},[n("div",{staticClass:"ph-tooltip-wrap ph-add-file",on:{click:function(e){return e.preventDefault(),t.addFile(e)}}},[n("svg",{staticClass:"feather feather-paperclip",staticStyle:{fill:"none"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("path",{attrs:{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}})]),t._v(" "),n("div",{staticClass:"ph-tooltip"},[t._v("Attach A File")])]),t._v(" "),n("input",{ref:"file",staticClass:"ph-file-input",staticStyle:{display:"none"},attrs:{type:"file",accept:t.accepts},on:{change:t.uploadImage}})])},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.thread&&t.thread.attachment_ids.length?n("div",{staticClass:"ph-attachment-container",staticStyle:{"margin-bottom":"0"}},t._l(t.thread.attachment_ids,function(e){return n("ThreadAttachment",{key:e,attrs:{id:e,thread:t.thread}})}),1):t._e()},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ph-comment__attachment"},[this.loaded?[e("Attachment",{attrs:{media:this.media,canDelete:this.canDelete},on:{delete:this.confirmTrash}})]:[e("AttachmentLoading",{attrs:{progress:this.progress}})]],2)},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ph-comment__attachment"},[this.media?e("Attachment",{attrs:{media:this.media,canDelete:this.canDelete},on:{delete:this.confirmTrash}}):e("AttachmentLoading")],1)},i=[];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ph-file-attachment-thumbnail"},[e("div",{staticClass:"thumb-icon"},[this._m(0),this._v(" "),e("div",{staticClass:"ph-upload-progress"},[e("div",{staticClass:"ph-upload-progress-indicator",style:{width:this.progress+"%"}})])]),this._v(" "),e("div",{staticClass:"ph-attachment-title"})])},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ph-loading-image light"},[e("div",{staticClass:"ph-loading-image-dots"})])}];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ph-file-attachment-thumbnail"},[n("div",{staticClass:"thumb-icon",style:[t.url?{"background-image":"url("+t.url+")"}:{}]},[t.progress<100?[t._m(0),t._v(" "),n("div",{staticClass:"ph-upload-progress"},[n("div",{staticClass:"ph-upload-progress-indicator",style:{width:t.progress+"%"}})])]:[t.canDelete?n("div",{staticClass:"ph-close-icon ph-tooltip-wrap",on:{click:function(e){return e.preventDefault(),t.$emit("delete")}}},[n("svg",{attrs:{viewBox:"0 0 512 512",id:"ion-android-close",width:"9",height:"9"}},[n("path",{attrs:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"}})]),t._v(" "),n("div",{staticClass:"ph-tooltip"},[t._v(t._s(t.__("Delete","project-huddle")))])]):t._e(),t._v(" "),t.url?t._e():n("div",{staticClass:"ph-generic-attachment-icon"},[t._v(t._s(t.extension))]),t._v(" "),n("a",{staticClass:"ph-download",attrs:{href:t.sourceUrl,download:t.title,target:"_blank"}},[n("svg",{attrs:{viewBox:"0 0 512 512",id:"ion-android-download",width:"18",height:"18",fill:"#fff"}},[n("path",{attrs:{d:"M403.002 217.001C388.998 148.002 328.998 96 256 96c-57.998 0-107.998 32.998-132.998 81.001C63.002 183.002 16 233.998 16 296c0 65.996 53.999 120 120 120h260c55 0 100-45 100-100 0-52.998-40.996-96.001-92.998-98.999zM224 268v-76h64v76h68L256 368 156 268h68z"}})])])]],2),t._v(" "),n("div",{staticClass:"ph-attachment-title",attrs:{"data-text":t.title||!1}},[t._v(t._s(t.title))])])},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ph-loading-image light"},[e("div",{staticClass:"ph-loading-image-dots"})])}];r._withStripped=!0,n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})},function(t,e,n){"use strict";n.r(e);var r=n(35),i=n(17);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/Attachment.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=n(34),i=n(19);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/AttachmentLoading.vue",e.default=s.exports},,,,,,,,,,,,,function(t,e,n){t.exports=n(51)},function(t,e,n){"use strict";n(52),n(54),n(58)},function(t,e,n){"use strict";var r,i=n(53),a=(r=i)&&r.__esModule?r:{default:r};(0,ph.components.extendComponent)("shared.editor",{mounted:function(){var t=this;this.insertIntoSlot("footer-right-after",a.default,{props:{thread:this.thread},on:{upload:function(e){t.$emit("upload",e)}}})}})},function(t,e,n){"use strict";n.r(e);var r=n(30),i=n(11);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/UploadIcon.vue",e.default=s.exports},function(t,e,n){"use strict";var r,i=n(55),a=(r=i)&&r.__esModule?r:{default:r};function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(0,ph.components.extendComponent)("thread.body",{data:function(){return{attachments:[]}},mounted:function(){var t=this;this.$refs.editor.$on("upload",this.uploadFile),this.insertComponent({ref:"form",component:a.default,data:{propsData:{id:this.thread.id}},key:"test"}),ph.hooks.addFilter("ph_new_comment_data","ph.file-uploads",function(e,n){return e.attachment_ids=t.thread.attachment_ids,t.thread.$update({attachment_ids:[]}),e})},methods:{uploadFile:function(t){var e=this;this.$store.dispatch("entities/insert",{entity:"media",data:{post:this.thread.id||0,file:t[0]}}).then(function(t){e.thread.$update({attachment_ids:[].concat(o(e.thread.attachment_ids),o(_.pluck(t.media,"id")))})})}}})},function(t,e,n){"use strict";n.r(e);var r=n(31),i=n(13);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/ThreadAttachments.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=n(32),i=n(15);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/ThreadAttachment.vue",e.default=s.exports},function(t,e,n){"use strict";
/*! file-extension v4.0.5 | (c) silverwind | BSD license */t.exports=function(t,e){if(e||(e={}),!t)return"";var n=(/[^.\/\\]*$/.exec(t)||[""])[0];return e.preserveCase?n:n.toLowerCase()}},function(t,e,n){"use strict";var r,i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(59),o=(r=a)&&r.__esModule?r:{default:r};(0,ph.components.extendComponent)("shared.comment",{mounted:function(){var t=this;this.insertComponent({ref:"content",component:o.default,data:{propsData:{comment:this.comment}},key:"attachments-"+this.comment.id}),this.comment.attachment_ids.length&&this.$http.get("/media/",{params:{include:this.comment.attachment_ids}}).then(function(e){var n=i(e,1)[0];_.each(n,function(t){t.post=0}),t.$store.dispatch("entities/insertOrUpdate",{entity:"media",data:n})})}})},function(t,e,n){"use strict";n.r(e);var r=n(29),i=n(21);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/CommentAttachments.vue",e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=n(33),i=n(23);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var o=n(0),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="assets/src/websites/front-end/js/components/CommentAttachment.vue",e.default=s.exports}]);