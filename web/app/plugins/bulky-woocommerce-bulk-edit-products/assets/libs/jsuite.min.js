!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.jSuites=t()}(this,function(){"use strict";var e=function(e){var t={init:function(){}};return t};return(e.ajax=function(t,n){if(Array.isArray(t)){var o={instance:[],complete:n};if(t.length>0)for(var a=0;a<t.length;a++)t[a].multiple=o,o.instance.push(e.ajax(t[a]));return o}if(t.data||(t.data={}),t.type&&(t.method=t.type),t.method||(t.method="GET"),t.dataType||(t.dataType="json"),t.data){var i=function(e,t){var n=[],o=Object.keys(e);if(o.length)for(var a=0;a<o.length;a++){if(t)var r=t+"["+o[a]+"]";else r=o[a];if("object"==typeof e[o[a]])for(var s=i(e[o[a]],r),l=Object.keys(s),d=0;d<l.length;d++)n[l[d]]=s[l[d]];else n[r]=e[o[a]]}return n},r=[],s=i(t.data),l=Object.keys(s);for(a=0;a<l.length;a++)r.push(l[a]+"="+encodeURIComponent(s[l[a]]));"GET"==t.method&&r.length>0&&(t.url.indexOf("?")<0&&(t.url+="?"),t.url+=r.join("&"))}var d=new XMLHttpRequest;return d.open(t.method,t.url,!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"==t.method?(d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):"json"==t.dataType&&d.setRequestHeader("Content-Type","text/json"),1!=t.cache&&(d.setRequestHeader("pragma","no-cache"),d.setRequestHeader("cache-control","no-cache")),1==t.withCredentials&&(d.withCredentials=!0),"function"==typeof t.beforeSend&&t.beforeSend(d),d.onload=function(){if(200===d.status)if("json"==t.dataType)try{var n=JSON.parse(d.responseText);t.success&&"function"==typeof t.success&&t.success(n)}catch(e){t.error&&"function"==typeof t.error&&t.error(e,n)}else{n=d.responseText;t.success&&"function"==typeof t.success&&t.success(n)}else t.error&&"function"==typeof t.error&&t.error(d.responseText);if(e.ajax.queue&&e.ajax.queue.length>0&&e.ajax.send(e.ajax.queue.shift()),e.ajax.requests&&e.ajax.requests.length){var o=e.ajax.requests.indexOf(d);if(e.ajax.requests.splice(o,1),e.ajax.requests.length||(t.complete&&"function"==typeof t.complete&&t.complete(n),e.ajax.oncomplete&&"function"==typeof e.ajax.oncomplete[t.group]&&(e.ajax.oncomplete[t.group](),e.ajax.oncomplete[t.group]=null)),t.multiple&&t.multiple.instance){o=t.multiple.instance.indexOf(d);t.multiple.instance.splice(o,1),t.multiple.instance.length||t.multiple.complete&&"function"==typeof t.multiple.complete&&t.multiple.complete(n)}}},d.data=r,1==t.queue&&e.ajax.requests.length>0?e.ajax.queue.push(d):e.ajax.send(d),d}).send=function(t){t.data?t.send(t.data.join("&")):t.send(),e.ajax.requests.push(t)},e.ajax.exists=function(e,t){var n=new XMLHttpRequest;n.open("HEAD",e,!1),n.send(),n.status&&t(n.status)},e.ajax.oncomplete={},e.ajax.requests=[],e.ajax.queue=[],e.alert=function(t){e.getWindowWidth()<800&&e.dialog?e.dialog.open({title:"Alert",message:t}):alert(t)},(e.animation={}).slideLeft=function(e,t,n){1==t?(e.classList.add("slide-left-in"),setTimeout(function(){e.classList.remove("slide-left-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-left-out"),setTimeout(function(){e.classList.remove("slide-left-out"),"function"==typeof n&&n()},400))},e.animation.slideRight=function(e,t,n){1==t?(e.classList.add("slide-right-in"),setTimeout(function(){e.classList.remove("slide-right-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-right-out"),setTimeout(function(){e.classList.remove("slide-right-out"),"function"==typeof n&&n()},400))},e.animation.slideTop=function(e,t,n){1==t?(e.classList.add("slide-top-in"),setTimeout(function(){e.classList.remove("slide-top-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-top-out"),setTimeout(function(){e.classList.remove("slide-top-out"),"function"==typeof n&&n()},400))},e.animation.slideBottom=function(e,t,n){1==t?(e.classList.add("slide-bottom-in"),setTimeout(function(){e.classList.remove("slide-bottom-in"),"function"==typeof n&&n()},400)):(e.classList.add("slide-bottom-out"),setTimeout(function(){e.classList.remove("slide-bottom-out"),"function"==typeof n&&n()},100))},e.animation.fadeIn=function(e,t){e.style.display="",e.classList.add("fade-in"),setTimeout(function(){e.classList.remove("fade-in"),"function"==typeof t&&t()},2e3)},e.animation.fadeOut=function(e,t){e.classList.add("fade-out"),setTimeout(function(){e.style.display="none",e.classList.remove("fade-out"),"function"==typeof t&&t()},1e3)},(e.calendar=function(t,n){var o={options:{}};e.calendar.current||(e.calendar.current=null);var a={type:"default",validRange:null,startingDay:null,format:"DD/MM/YYYY",readonly:!0,today:!1,time:!1,resetButton:!0,placeholder:"",months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_short:["S","M","T","W","T","F","S"],textDone:"Done",textReset:"Reset",textUpdate:"Update",value:null,fullscreen:!1,opened:!1,onopen:null,onclose:null,onchange:null,onupdate:null,mode:null,position:null};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];if(o.options.value||"INPUT"==t.tagName&&t.value&&(o.options.value=t.value),o.date=null,o.options.value)o.date=e.calendar.toArray(o.options.value);else if(o.options.today){var r=new Date,s=r.getFullYear(),l=r.getMonth()+1,d=r.getDate(),c=r.getHours(),u=r.getMinutes();o.date=[s,l,d,c,u,0]}var p=document.createElement("div");p.className="jcalendar-reset",p.innerHTML=o.options.textReset;var f=document.createElement("div");f.className="jcalendar-confirm",f.innerHTML=o.options.textDone;var h=document.createElement("div");h.className="jcalendar-controls",h.style.borderBottom="1px solid #ddd",o.options.resetButton&&h.appendChild(p),h.appendChild(f);var m=document.createElement("div");m.className="jcalendar-container";var g,v=document.createElement("div");(v.className="jcalendar-content",m.appendChild(v),"DIV"==t.tagName)?(g=t).classList.add("jcalendar-inline"):(v.appendChild(h),(g=document.createElement("div")).className="jcalendar");g.appendChild(m);var b=document.createElement("div");b.className="jcalendar-table",v.appendChild(b);var y=document.createElement("td");y.setAttribute("colspan","2"),y.className="jcalendar-prev";var w=document.createElement("span");w.className="jcalendar-year";var L=document.createElement("span");L.className="jcalendar-month";var x=document.createElement("td");x.className="jcalendar-header",x.setAttribute("colspan","3"),x.appendChild(L),x.appendChild(w);var j=document.createElement("td");j.setAttribute("colspan","2"),j.className="jcalendar-next";var E=document.createElement("tr");E.appendChild(y),E.appendChild(x),E.appendChild(j);var T=document.createElement("thead");T.appendChild(E);var C=document.createElement("tbody"),A=document.createElement("tfoot"),O=document.createElement("table");O.setAttribute("cellpadding","0"),O.setAttribute("cellspacing","0"),O.appendChild(T),O.appendChild(C),O.appendChild(A),b.appendChild(O);var N=document.createElement("select");N.className="jcalendar-select",N.onchange=function(){o.date[3]=this.value,"function"==typeof o.options.onupdate&&o.options.onupdate(t,o.getValue())};for(u=0;u<24;u++){(D=document.createElement("option")).value=u,D.innerHTML=e.two(u),N.appendChild(D)}var M=document.createElement("select");M.className="jcalendar-select",M.onchange=function(){o.date[4]=this.value,"function"==typeof o.options.onupdate&&o.options.onupdate(t,o.getValue())};for(u=0;u<60;u++){var D;(D=document.createElement("option")).value=u,D.innerHTML=e.two(u),M.appendChild(D)}var H=document.createElement("div");H.className="jcalendar-controls";var I=document.createElement("div");I.className="jcalendar-time",I.style.maxWidth="140px",I.appendChild(N),I.appendChild(M);var k=document.createElement("input");k.setAttribute("type","button"),k.className="jcalendar-update",k.value=o.options.textUpdate;var S=document.createElement("div");S.style.flexGrow="10",S.appendChild(k),H.appendChild(I),"INPUT"==t.tagName&&H.appendChild(S),v.appendChild(H);var R=document.createElement("div");R.className="jcalendar-backdrop",g.appendChild(R);var P=function(){var e=g.querySelector(".jcalendar-selected");e&&e.classList.contains("jcalendar-disabled")?(k.setAttribute("disabled","disabled"),N.setAttribute("disabled","disabled"),M.setAttribute("disabled","disabled")):(k.removeAttribute("disabled"),N.removeAttribute("disabled"),M.removeAttribute("disabled")),"function"==typeof o.options.onupdate&&o.options.onupdate(t,o.getValue())};o.open=function(n){if(!g.classList.contains("jcalendar-focus")&&!g.classList.contains("jcalendar-inline")){if(o.getDays(),"year-month-picker"==o.options.type&&o.getMonths(),o.options.time&&(N.value=o.date[3],M.value=o.date[4]),e.calendar.current&&e.calendar.current.close(),e.calendar.current=o,g.classList.add("jcalendar-focus"),e.getWindowWidth()<800||o.options.fullscreen)g.classList.add("jcalendar-fullsize"),e.animation.slideBottom(v,1);else{var a=t.getBoundingClientRect(),i=v.getBoundingClientRect();o.options.position?(m.style.position="fixed",window.innerHeight<a.bottom+i.height?m.style.top=a.top-(i.height+2)+"px":m.style.top=a.top+a.height+2+"px",m.style.left=a.left+"px"):window.innerHeight<a.bottom+i.height?m.style.bottom=1*a.height+i.height+2+"px":m.style.top="2px"}"function"==typeof o.options.onopen&&o.options.onopen(t)}},o.close=function(n,a){if(e.calendar.current){if(e.calendar.current=null,!1!==a){var i=g.querySelector(".jcalendar-selected");if("string"==typeof a)var r=a;else if(!i||i.classList.contains("jcalendar-disabled"))r=o.options.value;else r=o.getValue();o.setValue(r)}n||"function"!=typeof o.options.onclose||o.options.onclose(t),g.classList.remove("jcalendar-focus")}return o.options.value},o.prev=function(){"years"==o.options.mode?(o.date[0]=o.date[0]-12,o.getYears()):"months"==o.options.mode?(o.date[0]=parseInt(o.date[0])-1,o.getMonths()):(o.date[1]<2?(o.date[0]=o.date[0]-1,o.date[1]=12):o.date[1]=o.date[1]-1,o.getDays())},o.next=function(){"years"==o.options.mode?(o.date[0]=parseInt(o.date[0])+12,o.getYears()):"months"==o.options.mode?(o.date[0]=parseInt(o.date[0])+1,o.getMonths()):(o.date[1]>11?(o.date[0]=parseInt(o.date[0])+1,o.date[1]=1):o.date[1]=parseInt(o.date[1])+1,o.getDays())},o.setToday=function(){var e=(new Date).toISOString().substr(0,10);return o.setValue(e),e},o.setValue=function(e){e||(e=""+e);var n=e,a=o.options.value;if(a!=n){o.setLabel(n,o.options);(r=n.split(" "))[1]||(r[1]="00:00:00");var i=r[1].split(":"),r=r[0].split("-"),s=parseInt(r[0]),l=parseInt(r[1]),d=parseInt(r[2]),c=parseInt(i[0]),u=parseInt(i[1]);o.date=[s,l,d,c,u,0];e=o.setLabel(n,o.options);o.options.value=n,"function"==typeof o.options.onchange&&o.options.onchange(t,n,a),t.value!=e&&(t.value=e,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))}o.getDays()},o.getValue=function(){return o.date?o.options.time?e.two(o.date[0])+"-"+e.two(o.date[1])+"-"+e.two(o.date[2])+" "+e.two(o.date[3])+":"+e.two(o.date[4])+":"+e.two(0):e.two(o.date[0])+"-"+e.two(o.date[1])+"-"+e.two(o.date[2])+" "+e.two(0)+":"+e.two(0)+":"+e.two(0):""},o.update=function(e,t){if(e.classList.contains("jcalendar-disabled"));else{var n=g.querySelector(".jcalendar-selected");n&&n.classList.remove("jcalendar-selected"),e.classList.add("jcalendar-selected"),e.classList.contains("jcalendar-set-month")?o.date[1]=t:o.date[2]=e.innerText,o.options.time?(o.date[3]=N.value,o.date[4]=M.value):o.close()}P()},o.reset=function(){o.setValue(""),o.close(!1,!1)},o.getDays=function(){o.options.mode="days";var t=new Date,n=o.date&&e.isNumeric(o.date[0])?o.date[0]:parseInt(t.getFullYear()),a=o.date&&e.isNumeric(o.date[1])?o.date[1]:parseInt(t.getMonth())+1,i=o.date&&e.isNumeric(o.date[2])?o.date[2]:parseInt(t.getDate()),r=o.date&&e.isNumeric(o.date[3])?o.date[3]:parseInt(t.getHours()),s=o.date&&e.isNumeric(o.date[4])?o.date[4]:parseInt(t.getMinutes());o.date=[n,a,i,r,s,0],w.innerHTML=n,L.innerHTML=o.options.months[a-1];var l=t.getMonth()==a-1&&t.getFullYear()==n,d=t.getDate(),c=(t=new Date(n,a,0,0,0)).getDate(),u=(t=new Date(n,a-1,0,0,0)).getDay()+1;u-=f=o.options.startingDay||0,C.innerHTML="",(g=document.createElement("tr")).setAttribute("align","center"),C.appendChild(g);for(var p=0;p<7;p++){(b=document.createElement("td")).classList.add("jcalendar-weekday"),b.innerHTML=o.options.weekdays_short[f],g.appendChild(b),++f>6&&(f=0)}for(var f=0,h=0,m=0;m<6;m++){var g;(g=document.createElement("tr")).setAttribute("align","center");var v=!0;for(p=0;p<7;p++){var b;if((b=document.createElement("td")).classList.add("jcalendar-set-day"),f>=u&&f<u+c){h++,b.innerHTML=h,h==i&&b.classList.add("jcalendar-selected"),l&&d==h&&(b.style.fontWeight="bold");var y=e.calendar.now(new Date(n,a-1,h),!0);if(o.options.validRange){if(!o.options.validRange[0]||y>=o.options.validRange[0])var x=!0;else x=!1;if(!o.options.validRange[1]||y<=o.options.validRange[1])var j=!0;else j=!1;x&&j||b.classList.add("jcalendar-disabled")}v=!1}g.appendChild(b),f++}0==v&&C.appendChild(g)}o.options.time?I.style.display="":I.style.display="none",P()},o.getMonths=function(){o.options.mode="months";var t=o.options.months,n=o.options.value,a=new Date,i=o.date&&e.isNumeric(o.date[0])?o.date[0]:parseInt(a.getFullYear());o.date&&e.isNumeric(o.date[1])?o.date[1]:parseInt(a.getMonth());n||(n=parseInt(a.getFullYear())+"-"+e.two(parseInt(a.getMonth())+1)),n=n.substr(0,10).split("-"),w.innerHTML=o.date[0],L.innerHTML="";var r=parseInt(a.getFullYear()),s=parseInt(a.getMonth()),l=document.createElement("table");l.setAttribute("width","100%");for(var d=null,c=0;c<12;c++){if(!(c%4))(d=document.createElement("tr")).setAttribute("align","center"),l.appendChild(d);var u=document.createElement("td");if(u.classList.add("jcalendar-set-month"),u.setAttribute("data-value",c+1),u.innerText=t[c],o.options.validRange){var p=i+"-"+e.two(c+1);if(!o.options.validRange[0]||p>=o.options.validRange[0].substr(0,7))var f=!0;else f=!1;if(!o.options.validRange[1]||p<=o.options.validRange[1].substr(0,7))var h=!0;else h=!1;f&&h||u.classList.add("jcalendar-disabled")}i==n[0]&&c+1==n[1]&&u.classList.add("jcalendar-selected"),r==i&&s==c&&(u.style.fontWeight="bold"),d.appendChild(u)}C.innerHTML='<tr><td colspan="7"></td></tr>',C.children[0].children[0].appendChild(l),P()},o.getYears=function(){o.options.mode="years";var e=[];for(u=0;u<25;u++)e[u]=parseInt(o.date[0])+(u-12);var t='<td colspan="7"><table width="100%"><tr align="center">';for(u=0;u<25;u++)u>0&&!(u%5)&&(t+='</tr><tr align="center">'),t+='<td class="jcalendar-set-year">'+e[u]+"</td>";t+="</tr></table></td>",C.innerHTML=t,P()},o.setLabel=function(t,n){return e.calendar.getDateString(t,n)},o.fromFormatted=function(t,n){return e.calendar.extractDateFromString(t,n)};var V=function(e){var t=e.target.className;"jcalendar-prev"==t?(o.prev(),e.stopPropagation(),e.preventDefault()):"jcalendar-next"==t?(o.next(),e.stopPropagation(),e.preventDefault()):"jcalendar-month"==t?(o.getMonths(),e.stopPropagation(),e.preventDefault()):"jcalendar-year"==t?(o.getYears(),e.stopPropagation(),e.preventDefault()):"jcalendar-set-year"==t?(o.date[0]=e.target.innerText,"year-month-picker"==o.options.type?o.getMonths():o.getDays(),e.stopPropagation(),e.preventDefault()):e.target.classList.contains("jcalendar-set-month")?("year-month-picker"==o.options.type?o.update(e.target,parseInt(e.target.getAttribute("data-value"))):o.getDays(),e.stopPropagation(),e.preventDefault()):"jcalendar-confirm"==t||"jcalendar-update"==t?(o.close(),e.stopPropagation(),e.preventDefault()):"jcalendar-close"==t?(o.close(),e.stopPropagation(),e.preventDefault()):"jcalendar-backdrop"==t?(o.close(!1,!1),e.stopPropagation(),e.preventDefault()):"jcalendar-reset"==t?(o.reset(),e.stopPropagation(),e.preventDefault()):e.target.classList.contains("jcalendar-set-day")&&e.target.innerText&&(o.update(e.target),e.stopPropagation(),e.preventDefault())};return t.addEventListener("keyup",function(t){if(t.target.value&&t.target.value.length>3){var n=e.calendar.extractDateFromString(t.target.value,o.options.format);n&&"true"==t.target.getAttribute("data-completed")&&o.setValue(n)}}),g.addEventListener("swipeleft",function(t){e.animation.slideLeft(O,0,function(){o.next(),e.animation.slideRight(O,1)}),t.preventDefault(),t.stopPropagation()}),g.addEventListener("swiperight",function(t){e.animation.slideRight(O,0,function(){o.prev(),e.animation.slideLeft(O,1)}),t.preventDefault(),t.stopPropagation()}),"ontouchend"in document.documentElement==!0?(g.addEventListener("touchend",V),t.addEventListener("touchend",function(e){o.open()})):(g.addEventListener("mouseup",V),t.addEventListener("mouseup",function(e){o.open()})),e.calendar.hasEvents||("ontouchstart"in document.documentElement==!0?document.addEventListener("touchstart",e.calendar.isOpen):document.addEventListener("mousedown",e.calendar.isOpen),document.addEventListener("keydown",function(t){13==t.which?e.calendar.current&&e.calendar.current.close(!1,!0):27==t.which&&e.calendar.current&&e.calendar.current.close(!1,!1)}),e.calendar.hasEvents=!0),"INPUT"==t.tagName?(t.parentNode.insertBefore(g,t.nextSibling),t.setAttribute("autocomplete","off"),t.setAttribute("data-mask",o.options.format.toLowerCase()),o.options.readonly&&t.setAttribute("readonly","readonly"),o.options.placeholder&&t.setAttribute("placeholder",o.options.placeholder),t.classList.add("jcalendar-input"),t.value=o.setLabel(o.getValue(),o.options)):(o.getDays(),o.options.time&&(N.value=o.date[3],M.value=o.date[4])),t.change=o.setValue,t.calendar=o,1==o.options.opened&&o.open(),o}).prettify=function(e,t){if(!t)t={justNow:"Just now",xMinutesAgo:"{0}m ago",xHoursAgo:"{0}h ago",xDaysAgo:"{0}d ago",xWeeksAgo:"{0}w ago",xMonthsAgo:"{0} mon ago",xYearsAgo:"{0}y ago"};var n=new Date,o=new Date(e),a=parseInt((n-o)/1e3/60);if(String.prototype.format=function(e){return this.replace("{0}",e)},0==a)var i=t.justNow;else if(a<90)i=t.xMinutesAgo.format(a);else if(a<1440)i=t.xHoursAgo.format(Math.round(a/60));else if(a<20160)i=t.xDaysAgo.format(Math.round(a/1440));else if(a<43200)i=t.xWeeksAgo.format(Math.round(a/10080));else if(a<1036800)i=t.xMonthsAgo.format(Math.round(a/43200));else i=t.xYearsAgo.format(Math.round(a/525600));return i},e.calendar.prettifyAll=function(){for(var t=document.querySelectorAll(".prettydate"),n=0;n<t.length;n++)t[n].getAttribute("data-date")?t[n].innerHTML=e.calendar.prettify(t[n].getAttribute("data-date")):(t[n].setAttribute("data-date",t[n].innerHTML),t[n].innerHTML=e.calendar.prettify(t[n].innerHTML))},e.calendar.now=function(t,n){if(!t)t=new Date;var o=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),r=t.getHours(),s=t.getMinutes(),l=t.getSeconds();return 1==n?e.two(o)+"-"+e.two(a)+"-"+e.two(i):e.two(o)+"-"+e.two(a)+"-"+e.two(i)+" "+e.two(r)+":"+e.two(s)+":"+e.two(l)},e.calendar.toArray=function(e){var t=(n=e.split(-1!==e.indexOf("T")?"T":" "))[1],n=n[0].split("-"),o=parseInt(n[0]),a=parseInt(n[1]),i=parseInt(n[2]);if(t){t=t.split(":");var r=parseInt(t[0]),s=parseInt(t[1])}else r=0,s=0;return[o,a,i,r,s,0]},e.calendar.extractDateFromString=function(t,n){if(t>0&&Number(t)==t)return(l=new Date(Math.round(86400*(t-25569)*1e3))).getFullYear()+"-"+e.two(l.getMonth())+"-"+e.two(l.getDate())+" 00:00:00";var o=""+t,a=n.replace(/[0-9]/g,""),i=1,r=a.search("YYYY");r=o.substr(r,4),parseInt(r)!=r&&(i=0);var s=a.search("MM");s=o.substr(s,2),(parseInt(s)!=s||s>12)&&(i=0);var l=a.search("DD");l=o.substr(l,2),(parseInt(l)!=l||l>31)&&(i=0);var d=a.search("HH");d>=0?(d=o.substr(d,2),(!parseInt(d)||d>23)&&(d="00")):d="00";var c=a.search("MI");c>=0?(c=o.substr(c,2),(!parseInt(c)||c>59)&&(c="00")):c="00";var u=a.search("SS");return u>=0?(u=o.substr(u,2),(!parseInt(u)||u>59)&&(u="00")):u="00",1==i&&t.length==a.length?r+"-"+s+"-"+l+" "+d+":"+c+":"+u:""},e.calendar.getDateString=function(e,t){if(!t)t={};if("string"==typeof t)var n=t;else n=t.format;if(t&&t.weekdays)var o=t.weekdays;else o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(t&&t.months)var a=t.months;else a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(t&&t.months)var i=t.monthsFull;else i=["January","February","March","April","May","June","July","August","September","October","November","December"];if(n||(n="DD/MM/YYYY"),e){var r=""+e,s=-1!==r.indexOf("T")?"T":" ",l="",d="",c="";if((r=r.split(s))[1]?(d=(l=r[1].split(":"))[1]?l[1]:"00",c=l[2]?l[2]:"00",l=l[0]?l[0]:"00"):(l="00",d="00",c="00"),(r=r[0].split("-"))[0]&&r[1]&&r[2]&&r[0]>0&&r[1]>0&&r[1]<13&&r[2]>0&&r[2]<32){var u=new Date(r[0],r[1]-1,r[2]);r[1]=(r[1].length<2?"0":"")+r[1],r[2]=(r[2].length<2?"0":"")+r[2],l=(l.length<2?"0":"")+l,d=(d.length<2?"0":"")+d,c=(c.length<2?"0":"")+c,e=(e=n).replace("MMM","MON");for(var p=["YYYY","YYY","YY","Y","MM","DD","DY","DAY","WD","D","Q","HH24","HH12","HH","PM","AM","MI","SS","MS","MONTH","MON"],f=[],h=e;h;){for(var m=0,g=0;g<p.length;g++)0==m&&0===h.toUpperCase().indexOf(p[g])&&(m=p[g].length);0==m?(f.push(h.substr(0,1)),h=h.substr(1)):(f.push(h.substr(0,m)),h=h.substr(m))}var v=function(e,t,n){if(1==n)for(var o=0;o<f.length;o++)f[o].toUpperCase()==e&&(f[o]=t);else for(o=0;o<f.length;o++)f[o]==e&&(f[o]=t)};v("YYYY",r[0],!0),v("YYY",r[0].substring(1,4),!0),v("YY",r[0].substring(2,4),!0),v("Y",r[0].substring(3,4),!0),v("MM",r[1],!0),v("DD",r[2],!0),v("Q",Math.floor((u.getMonth()+3)/3),!0),l&&v("HH24",l),l>12?(v("HH12",l-12,!0),v("HH",l-12,!0),v("AM","pm",!0),v("PM","pm",!0)):(v("HH12",l,!0),v("HH",l,!0),v("AM","am",!0),v("PM","am",!0)),v("MI",d,!0),v("SS",c,!0),v("MS",u.getMilliseconds(),!0),v("MONTH",i[u.getMonth()].toUpperCase()),v("Month",i[u.getMonth()]),v("month",i[u.getMonth()].toLowerCase()),v("MON",a[u.getMonth()].toUpperCase()),v("MMM",a[u.getMonth()].toUpperCase()),v("Mon",a[u.getMonth()]),v("mon",a[u.getMonth()].toLowerCase()),v("DAY",o[u.getDay()].toUpperCase()),v("Day",o[u.getDay()]),v("day",o[u.getDay()].toLowerCase()),v("DY",o[u.getDay()].substr(0,3).toUpperCase()),v("Dy",o[u.getDay()].substr(0,3)),v("dy",o[u.getDay()].substr(0,3).toLowerCase()),v("D",o[u.getDay()]),v("WD",o[u.getDay()]),e=f.join("")}else e=""}return e},e.calendar.isOpen=function(t){e.calendar.current&&t.target.className&&-1==t.target.className.indexOf("jcalendar")&&e.calendar.current.close(!1,!1)},e.color=function(t,n){if(t.classList.contains("jcolor"))return t.color.setOptions(n);var o={options:{}},a=null,i=null,r=null,s=null,l=null;o.setOptions=function(n){var a={placeholder:"",value:null,onopen:null,onclose:null,onchange:null,closeOnChange:!0,palette:null,position:null,doneLabel:"Done",resetLabel:"Reset",fullscreen:!1};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];s&&(s.innerHTML=o.options.resetLabel),l&&(l.innerHTML=o.options.doneLabel),o.options.palette||(o.options.palette=e.palette()),o.options.value&&(t.value=o.options.value),o.options.placeholder?t.setAttribute("placeholder",o.options.placeholder):t.getAttribute("placeholder")&&t.removeAttribute("placeholder")},o.open=function(){if(e.color.current&&e.color.current!=o&&e.color.current.close(),!e.color.current){e.color.current=o,a.classList.add("jcolor-focus");var n=r.getBoundingClientRect();if(e.getWindowWidth()<800||1==o.options.fullscreen)r.style.top="",r.classList.add("jcolor-fullscreen"),e.animation.slideBottom(r,1),i.style.display="block";else{r.classList.contains("jcolor-fullscreen")&&(r.classList.remove("jcolor-fullscreen"),i.style.display="");var s=t.getBoundingClientRect();o.options.position?(r.style.position="fixed",window.innerHeight<s.bottom+n.height?r.style.top=s.top-(n.height+2)+"px":r.style.top=s.top+s.height+2+"px",r.style.left=s.left+"px"):window.innerHeight<s.bottom+n.height?r.style.top=-1*(n.height+s.height+2)+"px":r.style.top="2px"}a.focus(),"function"==typeof o.options.onopen&&o.options.onopen(t)}},o.close=function(n){return e.color.current&&(t.focus(),e.color.current=null,n||"function"!=typeof o.options.onclose||o.options.onclose(t),a.classList.remove("jcolor-focus")),i.style.display="",o.options.value},o.setValue=function(e){if(e||(e=""),e!=o.options.value){o.options.value=e;var n=a.querySelector(".jcolor-selected");n&&n.classList.remove("jcolor-selected"),o.values[e]&&o.values[e].classList.add("jcolor-selected"),"function"==typeof o.options.onchange&&o.options.onchange(t,e),t.value!=o.options.value&&(t.value=o.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))}1==o.options.closeOnChange&&o.close()},o.getValue=function(){return o.options.value};var d=!1;return function(){o.setOptions(n),"INPUT"==t.tagName&&t.classList.add("jcolor-input"),(a=document.createElement("div")).className="jcolor",(i=document.createElement("div")).className="jcolor-backdrop",a.appendChild(i),(r=document.createElement("div")).className="jcolor-content";var c=document.createElement("div");c.className="jcolor-controls",r.appendChild(c),(s=document.createElement("div")).className="jcolor-reset",s.innerHTML=o.options.resetLabel,s.onclick=function(){o.setValue(""),o.close()},c.appendChild(s),(l=document.createElement("div")).className="jcolor-close",l.innerHTML=o.options.doneLabel,l.onclick=function(){o.close()},c.appendChild(l),o.values=[];var u=document.createElement("table");u.setAttribute("cellpadding","7"),u.setAttribute("cellspacing","0");for(var p=0;p<o.options.palette.length;p++){for(var f=document.createElement("tr"),h=0;h<o.options.palette[p].length;h++){var m=document.createElement("td"),g=o.options.palette[p][h];g.length<7&&"#"!==g.substr(0,1)&&(g="#"+g),m.style.backgroundColor=g,m.setAttribute("data-value",g),m.innerHTML="",f.appendChild(m),o.options.value==g&&m.classList.add("jcolor-selected"),o.values[g]=m}u.appendChild(f)}a.setAttribute("tabindex","900"),r.appendChild(u),a.appendChild(r),"INPUT"==t.tagName?t.parentNode.insertBefore(a,t.nextSibling):t.appendChild(a),t.addEventListener("focus",function(t){e.color.current||o.open()}),t.addEventListener("mouseup",function(t){e.color.current||o.open(),t.preventDefault(),t.stopPropagation()}),i.addEventListener("mousedown",function(e){d=!0,e.preventDefault(),e.stopPropagation()}),i.addEventListener("mouseup",function(t){d&&e.color.current&&(o.close(),d=!1),t.preventDefault(),t.stopPropagation()}),a.addEventListener("mouseup",function(t){"TD"==t.target.tagName&&(e.color.current.setValue(t.target.getAttribute("data-value")),t.preventDefault(),t.stopPropagation())}),e.color.hasEvents||(document.addEventListener("mousedown",function(t){e.color.current&&(e.findElement(t.target,"jcolor")||e.color.current.close())}),e.color.hasEvents=!0),t.change=o.setValue,t.color=o}(),o},(e.contextmenu=function(t,n){var o={options:{}},a={items:null,onclick:null};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];function r(e){if(!e.type||"line"!=e.type&&"divisor"!=e.type){d=document.createElement("div");var t=document.createElement("a");if(t.innerHTML=e.title,e.tooltip&&d.setAttribute("title",e.tooltip),e.icon&&d.setAttribute("data-icon",e.icon),e.id&&(d.id=e.id),e.disabled?d.className="jcontextmenu-disabled":e.onclick&&(d.method=e.onclick,d.addEventListener("mousedown",function(e){e.preventDefault()}),d.addEventListener("mouseup",function(e){this.method(e,this)})),d.appendChild(t),e.submenu){var n=document.createElement("span");n.innerHTML="&#9658;",d.appendChild(n),d.classList.add("jcontexthassubmenu");var o=document.createElement("div");o.classList.add("jcontextmenu"),o.setAttribute("tabindex","900");for(var a=e.submenu,i=0;i<a.length;i++){var s=r(a[i]);o.appendChild(s)}d.appendChild(o)}else if(e.shortcut){var l=document.createElement("span");l.innerHTML=e.shortcut,d.appendChild(l)}}else var d=document.createElement("hr");return d}return t.classList.add("jcontextmenu"),t.setAttribute("tabindex","900"),o.open=function(e,n){if(n&&(o.options.items=n,o.create(n)),o.options.items&&o.options.items.length>0||t.children.length){if(e.target)var a=e.clientX,i=e.clientY;else a=e.x,i=e.y;t.classList.add("jcontextmenu-focus"),t.focus();var r=t.getBoundingClientRect();if(window.innerHeight<i+r.height){var s=i-r.height;s<0&&(s=0),t.style.top=s+"px"}else t.style.top=i+"px";window.innerWidth<a+r.width?a-r.width>0?t.style.left=a-r.width+"px":t.style.left="10px":t.style.left=a+"px"}},o.close=function(){t.classList.contains("jcontextmenu-focus")&&t.classList.remove("jcontextmenu-focus")},o.create=function(e){t.innerHTML="";for(var n=0;n<e.length;n++){var o=r(e[n]);t.appendChild(o)}},"function"==typeof o.options.onclick&&t.addEventListener("click",function(e){o.options.onclick(o,e)}),o.options.items&&o.create(o.options.items),t.addEventListener("blur",function(e){o.close()}),e.contextmenu.hasEvents||(window.addEventListener("mousewheel",function(){o.close()}),document.addEventListener("contextmenu",function(t){var n=e.contextmenu.getElement(t.target);if(n){var o=document.querySelector("#"+n);o?(o.contextmenu.open(t),t.preventDefault()):console.error("JSUITES: Contextmenu id not found")}}),e.contextmenu.hasEvents=!0),t.contextmenu=o,o}).getElement=function(e){var t=0;return function e(n){n.parentNode&&n.getAttribute("aria-contextmenu-id")?t=n.getAttribute("aria-contextmenu-id"):n.parentNode&&e(n.parentNode)}(e),t},(e.dropdown=function(t,n){var o={options:{}};if("SELECT"==t.tagName){var a=e.dropdown.extractFromDom(t,n);t=a.el,n=a.options}var i={url:null,data:[],multiple:!1,autocomplete:!1,remoteSearch:!1,lazyLoading:!1,type:null,width:null,maxWidth:null,opened:!1,value:null,placeholder:"",newOptions:!1,position:!1,onchange:null,onload:null,onopen:null,onclose:null,onfocus:null,onblur:null,oninsert:null};for(var r in i)n&&n.hasOwnProperty(r)?o.options[r]=n[r]:o.options[r]=i[r];e.dropdown.current||(e.dropdown.current=null),1==o.options.remoteSearch&&(o.options.autocomplete=!0),o.items=[],o.groups=[],o.value=[],o.search="",o.results=null,o.numOfItems=0,t.classList.add("jdropdown"),"searchbar"==o.options.type?t.classList.add("jdropdown-searchbar"):"list"==o.options.type?t.classList.add("jdropdown-list"):"picker"==o.options.type?t.classList.add("jdropdown-picker"):e.getWindowWidth()<800?o.options.autocomplete?(t.classList.add("jdropdown-searchbar"),o.options.type="searchbar"):(t.classList.add("jdropdown-picker"),o.options.type="picker"):(o.options.width&&(t.style.width=o.options.width,t.style.minWidth=o.options.width),t.classList.add("jdropdown-default"),o.options.type="default");var s=document.createElement("div");s.className="jdropdown-container-header",o.header=document.createElement("input"),o.header.className="jdropdown-header",o.header.setAttribute("autocomplete","off"),"function"==typeof o.options.onfocus&&(o.header.onfocus=function(){o.options.onfocus(t)}),"function"==typeof o.options.onblur&&(o.header.onblur=function(){o.options.onblur(t)}),1==o.options.newOptions&&o.header.classList.add("jdropdown-add");var l=document.createElement("div");l.className="jdropdown-container";var d=document.createElement("div");d.className="jdropdown-content";var c=document.createElement("div");c.className="jdropdown-close",c.innerHTML="Done";var u=document.createElement("div");u.className="jdropdown-reset",u.innerHTML="x",u.onclick=function(){o.reset(),o.close()};var p=document.createElement("div");if(p.className="jdropdown-backdrop",1==o.options.autocomplete){t.setAttribute("data-autocomplete",!0);var f=null;o.header.addEventListener("keyup",function(e){f||(o.search!=o.header.value.trim()&&(f=setTimeout(function(){o.find(o.header.value.trim()),f=null},400)),t.classList.contains("jdropdown-focus")||o.open())})}else o.header.setAttribute("readonly","readonly");!o.options.placeholder&&t.getAttribute("placeholder")&&(o.options.placeholder=t.getAttribute("placeholder")),o.options.placeholder&&o.header.setAttribute("placeholder",o.options.placeholder),s.appendChild(o.header),"searchbar"==o.options.type?s.appendChild(c):l.appendChild(c),!o.options.type||o.options.type,l.appendChild(d),t.appendChild(s),t.appendChild(l),t.appendChild(p);return o.init=function(){if(o.options.url&&!o.options.data.length)e.ajax({url:o.options.url,method:"GET",dataType:"json",success:function(e){e&&(o.setData(e),null!=o.options.value&&o.setValue(o.options.value,!0),"function"==typeof o.options.onload&&o.options.onload(t,o,e))}});else{var n=[];if(o.options.data.length)for(var a=0;a<o.options.data.length;a++)n.push(o.options.data[a]);o.setData(n),null!=o.options.value&&o.setValue(o.options.value,!0),"function"==typeof o.options.onload&&o.options.onload(t,o,o.options.data)}1==o.options.opened&&o.open()},o.getUrl=function(){return o.options.url},o.setUrl=function(t){o.options.url=t,e.ajax({url:o.options.url,method:"GET",dataType:"json",success:function(e){o.setData(e)}})},o.add=function(t){if(!t){var n=1==o.options.autocomplete?o.header.value:"";if(!(t=prompt("Text",n)))return!1}var a={value:e.guid(),text:t};o.options.data.push(a);var i=o.createItem(a);return d.appendChild(i.element),"function"==typeof o.options.oninsert&&o.options.oninsert(o,i,a),"none"==d.style.display&&(d.style.display=""),a},o.createItem=function(e,t,n){void 0===e.text&&e.name&&(e.text=e.name),void 0===e.value&&e.id&&(e.value=e.id);var a={};if(a.element=document.createElement("div"),a.element.className="jdropdown-item",a.element.indexValue=o.items.length,a.value=e.value,a.text=e.text,e.id&&a.element.setAttribute("id",e.id),t&&(a.group=t,a.groupName=n),e.image){var i=document.createElement("img");i.className="jdropdown-image",i.src=e.image,e.title||i.classList.add("jdropdown-image-small"),a.element.appendChild(i)}else if(e.color){var r=document.createElement("div");r.className="jdropdown-color",r.style.backgroundColor=e.color,a.element.appendChild(r)}var s=document.createElement("div");if(s.className="jdropdown-description",e.text?s.innerText=e.text:s.innerHTML="&nbsp;",e.title){var l=document.createElement("div");l.className="jdropdown-title",l.innerText=e.title,s.appendChild(l),a.title=e.title}return o.value&&o.value[e.value]&&(a.element.classList.add("jdropdown-selected"),a.selected=!0),o.items.push(a),a.element.appendChild(s),a},o.appendData=function(e){if(e.length){o.numOfItems=0;for(var t=[],n=[],a=0;a<e.length;a++)e[a].group?(n[e[a].group]||(n[e[a].group]=[]),n[e[a].group].push(a)):t.push(a);var i=Object.keys(n);if(i.length>0)for(a=0;a<i.length;a++){var r=document.createElement("div");r.className="jdropdown-group";var s=document.createElement("div");s.className="jdropdown-group-name",s.innerHTML=i[a];var l=document.createElement("i");l.className="jdropdown-group-arrow jdropdown-group-arrow-down",s.appendChild(l);var c=document.createElement("div");c.className="jdropdown-group-items";for(var u=0;u<n[i[a]].length;u++){var p=o.createItem(e[n[i[a]][u]],r,i[a]);(0==o.options.lazyLoading||o.numOfItems<200)&&(c.appendChild(p.element),o.numOfItems++)}r.appendChild(s),r.appendChild(c),o.groups.push(r),c.children.length>0&&d.appendChild(r)}if(t.length)for(a=0;a<t.length;a++){p=o.createItem(e[t[a]]);(0==o.options.lazyLoading||o.numOfItems<200)&&(d.appendChild(p.element),o.numOfItems++)}}},o.setData=function(e){if(e.length){for(var t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t],text:e[t]});d.innerHTML="",o.reset(),o.items=[],o.appendData(e)}o.options.data=e},o.getPosition=function(e){for(var t=0;t<o.items.length;t++)if(o.items[t].value==e)return t;return 0},o.getText=function(e){for(var t=[],n=Object.keys(o.value),a=0;a<n.length;a++)t.push(o.value[n[a]]);return e?t:t.join("; ")},o.getValue=function(e){return e?Object.keys(o.value):Object.keys(o.value).join(";")},o.setValue=function(e,n){for(var a=function(e,t){o.items[e].value==t&&(o.items[e].element&&o.items[e].element.classList.add("jdropdown-selected"),o.items[e].selected=!0,o.value[t]=o.items[e].text)},i=o.getValue(),r=0;r<o.items.length;r++)1==o.items[r].selected&&(o.items[r].element&&o.items[r].element.classList.remove("jdropdown-selected"),o.items[r].selected=null);if(o.value=[],null!==e)if(Array.isArray(e))for(r=0;r<o.items.length;r++)for(var s=0;s<e.length;s++)a(r,e[s]);else for(var r=0;r<o.items.length;r++)a(r,e);i!=o.getValue()&&(t.classList.contains("jdropdown-focus")||(o.header.value=o.getText()),o.options.value=o.getValue(),!0!==n&&"function"==typeof o.options.onchange&&o.options.onchange(t,null,i,o.options.value),t.value!=o.options.value&&(t.value=o.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value})))},o.resetSelected=function(){o.setValue(null)},o.selectIndex=function(e){e=parseInt(e);if(o.items&&o.items[e]){o.getValue();if(o.setCursor(e,!1),o.options.multiple){var t=Object.keys(o.value);if(o.items[e].selected){o.items[e].element.classList.remove("jdropdown-selected"),o.items[e].selected=!1;var n=t.indexOf(""+o.items[e].value);-1!=n&&t.splice(n,1)}else o.items[e].element.classList.add("jdropdown-selected"),o.items[e].selected=!0,t.push(o.items[e].value);o.setValue(t)}else o.value[o.items[e].value]?o.setValue(null):o.setValue(o.items[e].value),o.close()}},o.selectItem=function(t){e.dropdown.current&&o.selectIndex(t.indexValue)},o.find=function(t){if(o.search==t.trim())return!1;if(o.search=t,o.numOfItems=0,1==o.options.remoteSearch)o.currentIndex=null,o.results=null,e.ajax({url:o.options.url+"?q="+t,method:"GET",dataType:"json",success:function(e){o.items=[],d.innerHTML="",o.appendData(e),e.length?d.style.display="":d.style.display="none"}});else{t=new RegExp(t,"gi"),o.results=[];for(var n=0;n<o.items.length;n++){var a=o.items[n].text,i=o.items[n].title||"",r=o.items[n].groupName||"";if((null==t||null!=o.value[o.items[n].value]||a.match(t)||i.match(t)||r.match(t))&&(o.results.push(o.items[n]),o.items[n].group&&o.items[n].group.children[1].children[0]))for(;o.items[n].group.children[1].children[0];)o.items[n].group.children[1].removeChild(o.items[n].group.children[1].children[0])}for(;d.children[0];)d.removeChild(d.children[0]);var s=o.results.length||0;1==o.options.lazyLoading&&s>200&&(s=200);for(n=0;n<s;n++)o.results[n].group?(o.results[n].group.parentNode||d.appendChild(o.results[n].group),o.results[n].group.children[1].appendChild(o.results[n].element)):d.appendChild(o.results[n].element),o.numOfItems++;o.results.length?d.style.display="":d.style.display="none"}},o.open=function(){if(e.dropdown.current!=t&&(e.dropdown.current&&e.dropdown.current.dropdown.close(),e.dropdown.current=t),!t.classList.contains("jdropdown-focus")){t.classList.add("jdropdown-focus"),e.getWindowWidth()<800&&(null!=o.options.type&&"picker"!=o.options.type||e.animation.slideBottom(l,1)),1==o.options.autocomplete&&(o.header.value=o.search,o.header.focus());var n=Object.keys(o.value);if(n[0]){var a=o.getPosition(n[0]);a&&o.setCursor(a)}if(!o.options.type||"default"==o.options.type){var i=t.getBoundingClientRect(),r=l.getBoundingClientRect();o.options.position?(l.style.position="fixed",window.innerHeight<i.bottom+r.height?(l.style.top="",l.style.bottom=window.innerHeight-i.top+1+"px"):(l.style.top=i.bottom+"px",l.style.bottom=""),l.style.left=i.left+"px"):window.innerHeight<i.bottom+r.height?(l.style.top="",l.style.bottom=i.height+1+"px"):(l.style.top="",l.style.bottom=""),l.style.minWidth=i.width+"px",o.options.maxWidth&&(l.style.maxWidth=o.options.maxWidth),o.items.length||1!=o.options.autocomplete?d.style.display="":d.style.display="none"}}"function"==typeof o.options.onopen&&o.options.onopen(t)},o.close=function(n){return e.dropdown.current&&(e.dropdown.current=null,o.setCursor(),o.header.value=o.getText(),n||"function"!=typeof o.options.onclose||o.options.onclose(t),o.header.blur&&o.header.blur(),t.classList.remove("jdropdown-focus")),o.getValue()},o.setCursor=function(e,t){if(null!=o.currentIndex&&o.items&&o.items[o.currentIndex]&&o.items[o.currentIndex].element.classList.remove("jdropdown-cursor"),null==e)o.currentIndex=null;else if(parseInt(e),o.items[e].element.classList.add("jdropdown-cursor"),o.currentIndex=e,!1!==t&&o.items[o.currentIndex].element){d.scrollTop;var n=o.items[o.currentIndex].element;d.scrollTop=n.offsetTop-n.scrollTop+n.clientTop-95}},o.resetCursor=o.setCursor,o.updateCursor=o.setCursor,o.reset=function(){o.setCursor(),o.setValue(null)},o.firstVisible=function(){for(var e=null,t=0;t<o.items.length;t++)if(o.items&&o.items[t]&&o.items[t].element.parentNode&&"none"!=o.items[t].element.style.display){e=t;break}if(null==e)return!1;o.setCursor(e)},o.first=function(){for(var e=null,t=o.currentIndex-1;t>=0;t--)o.items&&o.items[t]&&o.items[t].element.parentNode&&"none"!=o.items[t].element.style.display&&(e=t);if(null==e)return!1;o.setCursor(e)},o.last=function(){for(var e=null,t=o.currentIndex+1;t<o.items.length;t++)o.items&&o.items[t]&&o.items[t].element.parentNode&&"none"!=o.items[t].element.style.display&&(e=t);if(null==e)return!1;o.setCursor(e)},o.next=function(){for(var e=null,t=o.currentIndex+1;t<o.items.length;t++)if(o.items&&o.items[t]&&o.items[t].element.parentNode){e=t;break}if(null==e)return!1;o.setCursor(e)},o.prev=function(){for(var e=null,t=o.currentIndex-1;t>=0;t--)if(o.items&&o.items[t]&&o.items[t].element.parentNode){e=t;break}if(null==e)return!1;o.setCursor(e)},o.loadUp=function(){return!1},o.loadDown=function(){var e=!1;if(o.results)var t=o.results;else t=o.items;if(t.length>o.numOfItems){var n=o.numOfItems,a=t.length-n;a>200&&(a=200);for(var i=n;i<n+a;i++)t[i].group?(t[i].group.parentNode||d.appendChild(t[i].group),t[i].group.children[2].appendChild(t[i].element)):d.appendChild(t[i].element),o.numOfItems++;e=!0}return e},e.dropdown.hasEvents||("ontouchsend"in document.documentElement==!0?document.addEventListener("touchsend",e.dropdown.mouseup):document.addEventListener("mouseup",e.dropdown.mouseup),document.addEventListener("keydown",e.dropdown.onkeydown),e.dropdown.hasEvents=!0),1==o.options.lazyLoading&&e.lazyLoading(d,{loadUp:o.loadUp,loadDown:o.loadDown}),o.init(),t.change=o.setValue,t.dropdown=o,o}).hasEvents=!1,e.dropdown.mouseup=function(t){var n=e.findElement(t.target,"jdropdown");if(n){var o=n.dropdown;if(t.target.classList.contains("jdropdown-header"))if(n.classList.contains("jdropdown-focus")&&n.classList.contains("jdropdown-default")){var a=n.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0]){var i=t.changedTouches[0].clientX;t.changedTouches[0].clientY}else i=t.clientX,t.clientY;a.width-(i-a.left)<30?t.target.classList.contains("jdropdown-add")?o.add():o.close():0==o.options.autocomplete&&o.close()}else o.open();else if(t.target.classList.contains("jdropdown-group-name")){var r=t.target.nextSibling.children;if("none"!=t.target.nextSibling.style.display)for(var s=0;s<r.length;s++)"none"!=r[s].style.display&&o.selectItem(r[s])}else t.target.classList.contains("jdropdown-group-arrow")?t.target.classList.contains("jdropdown-group-arrow-down")?(t.target.classList.remove("jdropdown-group-arrow-down"),t.target.classList.add("jdropdown-group-arrow-up"),t.target.parentNode.nextSibling.style.display="none"):(t.target.classList.remove("jdropdown-group-arrow-up"),t.target.classList.add("jdropdown-group-arrow-down"),t.target.parentNode.nextSibling.style.display=""):t.target.classList.contains("jdropdown-item")?o.selectItem(t.target):t.target.classList.contains("jdropdown-image")?o.selectItem(t.target.parentNode):t.target.classList.contains("jdropdown-description")?o.selectItem(t.target.parentNode):t.target.classList.contains("jdropdown-title")?o.selectItem(t.target.parentNode.parentNode):(t.target.classList.contains("jdropdown-close")||t.target.classList.contains("jdropdown-backdrop"))&&o.close();t.stopPropagation(),t.preventDefault()}else e.dropdown.current&&e.dropdown.current.dropdown.close()},e.dropdown.onkeydown=function(t){if(e.dropdown.current){var n=e.dropdown.current.dropdown,o=n.currentIndex;t.shiftKey||13!=t.which&&27!=t.which&&35!=t.which&&36!=t.which&&38!=t.which&&40!=t.which||(13==t.which?n.selectIndex(o):38==t.which?null==o?n.firstVisible():o>0&&n.prev():40==t.which?null==o?n.firstVisible():o+1<n.items.length&&n.next():36==t.which?n.first():35==t.which?n.last():27==t.which&&n.close(),t.stopPropagation(),t.preventDefault())}},e.dropdown.extractFromDom=function(e,t){var n=e;if(t||(t={}),!e.getAttribute("multiple")||t&&null!=t.multiple||(t.multiple=!0),!e.getAttribute("placeholder")||t&&null!=t.placeholder||(t.placeholder=e.getAttribute("placeholder")),!e.getAttribute("data-autocomplete")||t&&null!=t.autocomplete||(t.autocomplete=!0),t&&null!=t.width||(t.width=e.offsetWidth),!e.value||t&&null!=t.value||(t.value=e.value),!t||null==t.data){t.data=[];for(var o=0;o<e.children.length;o++)if("OPTGROUP"==e.children[o].tagName)for(var a=0;a<e.children[o].children.length;a++)t.data.push({value:e.children[o].children[a].value,text:e.children[o].children[a].innerHTML,group:e.children[o].getAttribute("label")});else t.data.push({value:e.children[o].value,text:e.children[o].innerHTML})}t&&null!=t.onchange||(t.onchange=function(e,o,a,i){1==t.multiple?obj.items[o].classList.contains("jdropdown-selected")?n.options[o].setAttribute("selected","selected"):n.options[o].removeAttribute("selected"):n.value=i});var i=document.createElement("div");return e.parentNode.insertBefore(i,e),e.style.display="none",{el:e=i,options:t}},(e.editor=function(t,n){var o={options:{}};if("TEXTAREA"==t.tagName||"INPUT"==t.tagName){var a=t;a.style.display="none",t=document.createElement("div"),n.value||(n.value=a.value),n.onblur=function(e,t,n){a.value=t.getData()},a.insertBefore(t)}var i={value:null,snippet:null,toolbar:null,remoteParser:null,placeholder:null,parseURL:!1,filterPaste:!0,dropZone:!1,dropAsAttachment:!1,acceptImages:!1,acceptFiles:!1,maxFileSize:5e6,allowImageResize:!0,border:!0,padding:!0,maxHeight:null,height:null,focus:!1,onclick:null,onfocus:null,onblur:null,onload:null,onkeyup:null,onkeydown:null,onchange:null};for(var r in i)n&&n.hasOwnProperty(r)?o.options[r]=n[r]:o.options[r]=i[r];var s=null,l=null;t.innerHTML="","function"==typeof o.options.onclick&&(t.onclick=function(e){o.options.onclick(t,o,e)}),t.classList.add("jeditor-container"),1==o.options.padding&&t.classList.add("jeditor-padding"),o.options.placeholder&&t.setAttribute("data-placeholder",o.options.placeholder),0==o.options.border&&(t.style.border="0px");var d=document.createElement("div");d.className="jsnippet",d.setAttribute("contenteditable",!1);var c=document.createElement("div");c.className="jeditor-toolbar";var u=document.createElement("div");if(u.setAttribute("contenteditable",!0),u.setAttribute("spellcheck",!1),u.className="jeditor",(o.options.maxHeight||o.options.height)&&(u.style.overflowY="auto",o.options.maxHeight&&(u.style.maxHeight=o.options.maxHeight),o.options.height&&(u.style.height=o.options.height)),o.options.value)var p=o.options.value;else p=t.innerHTML?t.innerHTML:"";if(!p)p="<br>";var f=function(e){"function"==typeof o.options.onchange&&o.options.onchange(t,o,e),o.options.value=o.getData(),t.value!=o.options.value&&(t.value=o.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))},h=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll("img");if(n.length)for(var a=0;a<n.length;a++)o.addImage(n[a].src)},m=function(e){var t,n;if(window.getSelection&&(t=window.getSelection()).rangeCount){(n=t.getRangeAt(0)).toString();n.deleteContents(),n.insertNode(e),n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n)}},g=function(e){if(d.innerHTML="",e.image){(n=document.createElement("div")).className="jsnippet-image",n.setAttribute("data-k","image"),d.appendChild(n);var t=document.createElement("img");t.src=e.image,n.appendChild(t)}var n;(n=document.createElement("div")).className="jsnippet-title",n.setAttribute("data-k","title"),n.innerHTML=e.title,d.appendChild(n),(n=document.createElement("div")).className="jsnippet-description",n.setAttribute("data-k","description"),n.innerHTML=e.description,d.appendChild(n),(n=document.createElement("div")).className="jsnippet-host",n.setAttribute("data-k","host"),n.innerHTML=e.host,d.appendChild(n),(n=document.createElement("div")).className="jsnippet-url",n.setAttribute("data-k","url"),n.innerHTML=e.url,d.appendChild(n),u.appendChild(d)},v=function(){clearTimeout(s),s=setTimeout(function(){var n=u.querySelector(".jsnippet"),a=t.querySelector(".jeditor-thumbs-container");if(!n&&!a){var i=u.innerHTML.replace(/\n/g," "),r=document.createElement("div");r.innerHTML=i,(a=r.querySelector(".jeditor-thumbs-container"))&&a.remove();var s=r.innerText,l=e.editor.detectUrl(s);if(l)if("jpg"==l[0].substr(-3)||"png"==l[0].substr(-3)||"gif"==l[0].substr(-3))e.editor.getDomain(l[0])==window.location.hostname?o.importImage(l[0],""):o.importImage(o.options.remoteParser+l[0],"");else{var d=e.editor.youtubeParser(l[0]);o.parseWebsite(l[0],d)}}},1e3)};o.parseContent=function(){v()},o.parseWebsite=function(t,n){if(o.options.remoteParser){if(n)t="https://www.youtube.com/watch?v="+n;var a={title:"",description:"",image:"",host:t.split("/")[2],url:t};e.ajax({url:o.options.remoteParser+encodeURI(t.trim()),method:"GET",dataType:"json",success:function(e){e.title&&(a.title=e.title),e.description&&(a.description=e.description),e.image?a.image=e.image:e["og:image"]&&(a.image=e["og:image"]),e.host&&(a.host=e.host),e.url&&(a.url=e.url),g(a)}})}else console.log("The remoteParser is not defined")},o.setData=function(t){u.innerHTML=t,e.editor.setCursor(u,!0)},o.getText=function(){return u.innerText},o.getData=function(e){if(e){r={content:""};var t=u.querySelectorAll(".post-tag");if(t.length){r.users=[];for(var n=0;n<t.length;n++){var o=t[n].getAttribute("data-user");o&&r.users.push(o)}r.users=r.users.join(",")}if(d.innerHTML){r.snippet={};for(n=0;n<d.children.length;n++){var a=d.children[n].getAttribute("data-k");a&&("image"==a?r.snippet.image=d.children[n].children[0].getAttribute("src"):r.snippet[a]=d.children[n].innerHTML)}d.innerHTML="",d.remove()}var i=u.innerHTML;i=(i=(i=i.replace(/<br>/g,"\n")).replace(/<\/div>/g,"</div>\n")).replace(/<(?:.|\n)*?>/gm,""),r.content=i.trim(),r=JSON.stringify(r)}else var r=u.innerHTML;return r},o.reset=function(){u.innerHTML=""},o.addPdf=function(e){if("data"!=e.result.substr(0,4))console.error("Invalid source");else{var t=document.createElement("canvas");t.width=60,t.height=60;var n=new Image;t.getContext("2d").drawImage(n,0,0,t.width,t.height),t.toBlob(function(t){var n=document.createElement("img");n.src=window.URL.createObjectURL(t),n.setAttribute("data-extension","pdf"),e.name&&n.setAttribute("data-name",e.name),e.size&&n.setAttribute("data-size",e.size),e.date&&n.setAttribute("data-date",e.date),n.className="jfile pdf",m(n),n.content=e.result.substr(e.result.indexOf(",")+1)})}},o.getFiles=function(){return e.files(u).get()},o.addImage=function(e,t,n,a){if("data"==e.substr(0,4)||o.options.remoteParser){if("data"==e.substr(0,4)){i=(i=(i=e.split(";"))[0].split("/"))[1]}else{var i=e.substr(e.lastIndexOf(".")+1);e=o.options.remoteParser+e}var r=new Image;r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0,e.width,e.height),e.toBlob(function(o){var r=document.createElement("img");r.src=window.URL.createObjectURL(o),r.setAttribute("tabindex","900"),r.setAttribute("data-extension",i),t&&r.setAttribute("data-name",t),n&&r.setAttribute("data-size",n),a&&r.setAttribute("data-date",a),r.className="jfile";var s=e.toDataURL();m(r),r.content=s.substr(s.indexOf(",")+1),f()})},r.src=e}else console.error("remoteParser not defined in your initialization")},o.addFile=function(e){for(var t=[],n=0;n<e.length;n++)if(e[n].size>o.options.maxFileSize)alert("The file is too big");else{var a=e[n].type.split("/");(a="image"==a[0]?1:"pdf"==a[1]?2:0)?(t[n]=new FileReader,t[n].index=n,t[n].type=a,t[n].name=e[n].name,t[n].date=e[n].lastModified,t[n].size=e[n].size,t[n].addEventListener("load",function(e){2==e.target.type?1==o.options.acceptFiles&&o.addPdf(e.target):o.addImage(e.target.result,e.target.name,e.total,e.target.lastModified)},!1),t[n].readAsDataURL(e[n])):alert("The extension is not allowed")}},o.destroy=function(){u.removeEventListener("mouseup",b),u.removeEventListener("mousedown",y),u.removeEventListener("mousemove",w),u.removeEventListener("keyup",L),u.removeEventListener("keydown",x),u.removeEventListener("dragstart",E),u.removeEventListener("dragenter",T),u.removeEventListener("dragover",C),u.removeEventListener("drop",A),u.removeEventListener("paste",j),"function"==typeof o.options.onblur&&u.removeEventListener("blur",O),"function"==typeof o.options.onfocus&&u.removeEventListener("focus",N),t.editor=null,t.classList.remove("jeditor-container"),c.remove(),d.remove(),u.remove()};var b=function(e){l=!1},y=function(e){var t=function(t){var n=t.getBoundingClientRect();n.width-(e.clientX-n.left)<40&&e.clientY-n.top<40&&(t.innerHTML="",t.remove())};if("IMG"==e.target.tagName)if(e.target.style.cursor){var n=e.target.getBoundingClientRect();l={e:e.target,x:e.clientX,y:e.clientY,w:n.width,h:n.height,d:e.target.style.cursor},e.target.style.width||(e.target.style.width=n.width+"px"),e.target.style.height||(e.target.style.height=n.height+"px");var o=window.getSelection();if(o.rangeCount)for(var a=0;a<o.rangeCount;a++)o.removeRange(o.getRangeAt(a))}else l=!0;else e.target.classList.contains("jsnippet")?t(e.target):e.target.parentNode.classList.contains("jsnippet")&&t(e.target.parentNode),l=!0},w=function(e){if("IMG"==e.target.tagName&&1==o.options.allowImageResize&&e.target.getAttribute("tabindex")){var t=e.target.getBoundingClientRect();e.clientY-t.top<5?t.width-(e.clientX-t.left)<5?e.target.style.cursor="ne-resize":e.clientX-t.left<5?e.target.style.cursor="nw-resize":e.target.style.cursor="n-resize":t.height-(e.clientY-t.top)<5?t.width-(e.clientX-t.left)<5?e.target.style.cursor="se-resize":e.clientX-t.left<5?e.target.style.cursor="sw-resize":e.target.style.cursor="s-resize":t.width-(e.clientX-t.left)<5?e.target.style.cursor="e-resize":e.clientX-t.left<5?e.target.style.cursor="w-resize":e.target.style.cursor=""}if(1==e.which&&l&&l.d){if("e-resize"==l.d||"ne-resize"==l.d||"se-resize"==l.d)if(l.e.style.width=l.w+(e.clientX-l.x)+"px",e.shiftKey){var n=(e.clientX-l.x)*(l.h/l.w);l.e.style.height=l.h+n+"px"}else n=null;n||"s-resize"!=l.d&&"se-resize"!=l.d&&"sw-resize"!=l.d||e.shiftKey||(l.e.style.height=l.h+(e.clientY-l.y)+"px")}},L=function(e){u.innerHTML||(u.innerHTML="<div><br></div>"),"function"==typeof o.options.onkeyup&&o.options.onkeyup(t,o,e)},x=function(e){1==o.options.parseURL&&v(),"function"==typeof o.options.onkeydown&&o.options.onkeydown(t,o,e)},j=function(e){if(1==o.options.filterPaste){if(e.clipboardData||e.originalEvent.clipboardData)var t=(e.originalEvent||e).clipboardData.getData("text/html"),n=(e.originalEvent||e).clipboardData.getData("text/plain"),a=(e.originalEvent||e).clipboardData.files;else if(window.clipboardData)t=window.clipboardData.getData("Html"),n=window.clipboardData.getData("Text"),a=window.clipboardData.files;if(a.length)o.addFile(a);else{n=n.split("\r\n");if("DIV"==e.target.nodeName&&e.target.classList.contains("jeditor"))for(var i=0;i<n.length;i++){var r=document.createElement("div");n[i]?r.innerText=n[i]:r.innerHTML="<br/>",e.target.appendChild(r)}else{var s=document.createElement("div");for(i=0;i<n.length;i++)if(n[i]){var l=document.createElement("div");l.innerText=n[i],s.appendChild(l)}document.execCommand("insertHtml",!1,s.innerHTML)}1==o.options.acceptImages&&h(t)}e.preventDefault()}},E=function(e){l&&l.e&&e.preventDefault()},T=function(e){l||0==o.options.dropZone||t.classList.add("jeditor-dragging")},C=function(e){l||0==o.options.dropZone||(s&&clearTimeout(s),s=setTimeout(function(){t.classList.remove("jeditor-dragging")},100))},A=function(e){if(l||0==o.options.dropZone);else{var n=null;document.caretRangeFromPoint?n=document.caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent&&(n=document.createRange()).setStart(e.rangeParent,e.rangeOffset);var a=window.getSelection();a.removeAllRanges(),a.addRange(n),a.anchorNode.parentNode.focus();var i=(e.originalEvent||e).dataTransfer.getData("text/html"),r=(e.originalEvent||e).dataTransfer.getData("text/plain"),s=(e.originalEvent||e).dataTransfer.files;s.length?o.addFile(s):r&&h(i),t.classList.remove("jeditor-dragging"),e.preventDefault()}},O=function(e){"function"==typeof o.options.onblur&&o.options.onblur(t,o,e),f(e)},N=function(e){"function"==typeof o.options.onfocus&&o.options.onfocus(t,o,e)};return u.addEventListener("mouseup",b),u.addEventListener("mousedown",y),u.addEventListener("mousemove",w),u.addEventListener("keyup",L),u.addEventListener("keydown",x),u.addEventListener("dragstart",E),u.addEventListener("dragenter",T),u.addEventListener("dragover",C),u.addEventListener("drop",A),u.addEventListener("paste",j),u.addEventListener("focus",N),u.addEventListener("blur",O),"function"==typeof o.options.onload&&o.options.onload(t,o,u),u.innerHTML=p,t.appendChild(u),o.options.snippet&&g(o.options.snippet),null==o.options.toolbar&&(o.options.toolbar=e.editor.getDefaultToolbar()),o.options.toolbar&&(e.toolbar(c,{container:!0,items:o.options.toolbar}),t.appendChild(c)),o.options.focus&&e.editor.setCursor(u,"initial"==o.options.focus),t.change=o.setData,t.editor=o,o}).setCursor=function(e,t){e.focus(),document.execCommand("selectAll");var n=window.getSelection(),o=n.getRangeAt(0);if(1==t)var a=o.startContainer,i=0;else i=(a=o.endContainer).length;o.setStart(a,i),o.setEnd(a,i),n.removeAllRanges(),n.addRange(o)},e.editor.getDomain=function(e){return e.replace("http://","").replace("https://","").replace("www.","").split(/[\/?#]/)[0].split(/:/g)[0]},e.editor.detectUrl=function(e){var t=e.match(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/gi);return t&&"www"==t[0].substr(0,3)&&(t[0]="http://"+t[0]),t},e.editor.youtubeParser=function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!t||11!=t[7].length)&&t[7]},e.editor.getDefaultToolbar=function(){return[{content:"undo",onclick:function(){document.execCommand("undo")}},{content:"redo",onclick:function(){document.execCommand("redo")}},{type:"divisor"},{content:"format_bold",onclick:function(e,t,n){document.execCommand("bold"),document.queryCommandState("bold")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_italic",onclick:function(e,t,n){document.execCommand("italic"),document.queryCommandState("italic")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_underline",onclick:function(e,t,n){document.execCommand("underline"),document.queryCommandState("underline")?n.classList.add("selected"):n.classList.remove("selected")}},{type:"divisor"},{content:"format_list_bulleted",onclick:function(e,t,n){document.execCommand("insertUnorderedList"),document.queryCommandState("insertUnorderedList")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_list_numbered",onclick:function(e,t,n){document.execCommand("insertOrderedList"),document.queryCommandState("insertOrderedList")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_indent_increase",onclick:function(e,t,n){document.execCommand("indent",!0,null),document.queryCommandState("indent")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_indent_decrease",onclick:function(){document.execCommand("outdent"),document.queryCommandState("outdent")?this.classList.add("selected"):this.classList.remove("selected")}}]},e.files=function(e){e||console.error("No element defined in the arguments of your method");var t={},n=[];return t.data=[],t.get=function(){return t.data},t.getNames=function(e){if(e&&e.folder)var t=e.folder;else t="/media";for(var o={},a=0;a<n.length;a++)if(n[a]&&"blob:"==n[a].src.substr(0,5)){var i=n[a].src.split("/");o[n[a].src]=t+"/"+i[i.length-1]+"."+n[a].getAttribute("data-extension")}return o},t.updateNames=function(e){if(e&&e.folder)var t=e.folder;else t="/media";for(var o=0;o<n.length;o++)if(n[o]&&"blob:"==n[o].src.substr(0,5)){var a=n[o].src.split("/");n[o].src=t+"/"+a[a.length-1]+"."+n[o].getAttribute("data-extension")}},t.remove=function(){var t=e.querySelectorAll(".jfile");if(t.length>0)for(var n=0;n<t.length;n++){t[n].getAttribute("src");t[n].classList.contains("jremove")&&t[n].remove()}},t.set=function(){n=[],t.data=[];var o=e.querySelectorAll(".jfile");if(o.length>0){for(var a=0;a<o.length;a++){var i={},r=o[a].getAttribute("src");o[a].classList.contains("jremove")?i.remove=1:("data:"==r.substr(0,5)?(i.content=r.substr(5),i.extension=o[a].getAttribute("data-extension")):(i.file=r,i.extension=o[a].getAttribute("data-extension"),i.extension||(i.extension=r.substr(r.lastIndexOf(".")+1)),o[a].content&&(i.content=o[a].content)),o[a].getAttribute("data-name")&&(i.name=o[a].getAttribute("data-name")),o[a].getAttribute("data-file")&&(i.file=o[a].getAttribute("data-file")),o[a].getAttribute("data-size")&&(i.size=o[a].getAttribute("data-size")),o[a].getAttribute("data-date")&&(i.date=o[a].getAttribute("data-date")),o[a].getAttribute("data-cover")&&(i.cover=o[a].getAttribute("data-cover"))),n.push(o[a]),t.data.push(i)}return t.data}},t.set(),t},(e.form=function(t,n){var o={options:{}},a={url:null,message:"Are you sure? There are unsaved information in your form",ignore:!1,currentHash:null,submitButton:null,validations:null,onload:null,onbeforesave:null,onsave:null,onerror:function(t,n){e.alert(n)}};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];o.options.validations||(o.options.validations={}),o.options.submitButton||(o.options.submitButton=t.querySelector("input[type=submit]")),o.options.submitButton&&o.options.url&&(o.options.submitButton.onclick=function(){o.save()}),o.options.validations.email||(o.options.validations.email=e.validations.email),o.options.validations.length||(o.options.validations.length=e.validations.length),o.options.validations.required||(o.options.validations.required=e.validations.required),o.setUrl=function(e){o.options.url=e},o.load=function(){e.ajax({url:o.options.url,method:"GET",dataType:"json",success:function(n){e.form.setElements(t,n),"function"==typeof o.options.onload&&o.options.onload(t,n)}})},o.save=function(){var n=o.validate();if(n)o.options.onerror(t,n);else{var a=e.form.getElements(t,!0);if("function"==typeof o.options.onbeforesave)if(!1===(a=o.options.onbeforesave(t,a)))return void console.log("Onbeforesave returned false");e.ajax({url:o.options.url,method:"POST",dataType:"json",data:a,success:function(e){"function"==typeof o.options.onsave&&o.options.onsave(t,a,e),o.reset()}})}};return o.validateElement=function(e){var n=!1,a=e.getAttribute("data-validation");return"function"!=typeof o.options.validations[a]||o.options.validations[a](e.value,e)?e.classList.contains("error")&&function(e){var n=!1;e.classList.remove("error"),e.removeAttribute("title");for(var a=t.querySelectorAll("input, select, textarea"),i=0;i<a.length;i++)a[i].getAttribute("data-validation")&&a[i].classList.contains("error")&&(n=!0);o.options.submitButton&&(n?o.options.submitButton.setAttribute("disabled",!0):o.options.submitButton.removeAttribute("disabled"))}(e):n=function(e){e.classList.add("error"),o.options.submitButton&&o.options.submitButton.setAttribute("disabled",!0);var t=e.getAttribute("data-error")||"There is an error in the form";return e.setAttribute("title",t),t}(e),n},o.reset=function(){for(var e=t.querySelectorAll("input, select, textarea"),n=0;n<e.length;n++)"INPUT"==e[n].tagName&&"checkbox"==e[n].type?e[n].removeAttribute("checked"):e[n].value=""},o.validate=function(){for(var e=[],n=t.querySelectorAll("input, select, textarea"),a=0;a<n.length;a++)if(n[a].getAttribute("data-validation")){var i=o.validateElement(n[a]);i&&e.push(i)}return e.length>0&&e.join("<br>")},o.getError=function(){return!!o.validation()},o.setHash=function(){return o.getHash(e.form.getElements(t))},o.getHash=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},o.isChanged=function(){var e=o.setHash();return o.options.currentHash!=e},o.resetTracker=function(){o.options.currentHash=o.setHash(),o.options.ignore=!1},o.reset=function(){o.options.currentHash=o.setHash(),o.options.ignore=!1},o.setIgnore=function(e){o.options.ignore=!!e},setTimeout(function(){o.options.currentHash=o.setHash()},1e3),t.addEventListener("keyup",function(e){e.target.getAttribute("data-validation")&&o.validateElement(e.target)}),e.form.hasEvents||(window.addEventListener("beforeunload",function(e){if(o.isChanged()&&0==o.options.ignore){var t=o.options.message?o.options.message:"o/";return t?(void 0===e&&(e=window.event),e&&(e.returnValue=t),t):void 0}}),e.form.hasEvents=!0),t.form=o,o}).getElements=function(e,t){for(var n={},o=e.querySelectorAll("input, select, textarea"),a=0;a<o.length;a++){var i=o[a],r=i.name,s=i.value;r&&("checkbox"!=o[a].type&&"radio"!=o[a].type||(s=o[a].checked),n[r]=s)}return 1==t?n:JSON.stringify(n)},e.form.setElements=function(e,t){for(var n=e.querySelectorAll("input, select, textarea"),o=0;o<n.length;o++){var a=n[o].getAttribute("name"),i=n[o].getAttribute("type");"checkbox"==i||"radio"==i?t[a]&&(n[o].checked=!0):t[a]&&(n[o].value=t[a])}},e.tracker=e.form,e.focus=function(e){if(e.innerText.length){var t=document.createRange(),n=window.getSelection(),o=e.childNodes[e.childNodes.length-1];t.setStart(o,o.length),t.collapse(!0),n.removeAllRanges(),n.addRange(t),e.scrollLeft=e.scrollWidth}},e.isNumeric=function(e){return!isNaN(e)&&null!=e&&""!=e},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},e.hash=function(e){var t,n,o=0;if(0===e.length)return o;for(t=0;t<e.length;t++)(n=e.charCodeAt(t))>32&&(o=(o<<5)-o+n,o|=0);return o},e.randomColor=function(t){var n=String("#"+Math.random().toString(16).slice(2,8).toUpperCase()).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var o,a,i=[];for(a=0;a<3;a++)o=parseInt(n.substr(2*a,2),16),o=Math.round(Math.min(Math.max(0,o+-.25*o),255)).toString(16),i.push(("00"+o).substr(o.length));return 1==t?"#"+e.two(color[0].toString(16))+e.two(color[1].toString(16))+e.two(color[2].toString(16)):i},e.getWindowWidth=function(){var e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0];return e.innerWidth||n.clientWidth||o.clientWidth},e.getWindowHeight=function(){var e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0];return e.innerHeight||n.clientHeight||o.clientHeight},e.getPosition=function(e){if(e.changedTouches&&e.changedTouches[0])var t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY;else t=window.Event?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),n=window.Event?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return[t,n]},e.click=function(e){if(e.click)e.click();else{var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}},e.findElement=function(e,t){var n=!1;return function e(o){o&&!n&&("function"==typeof t?n=t(o):"string"==typeof t&&o.classList&&o.classList.contains(t)&&(n=o)),o.parentNode&&!n&&e(o.parentNode)}(e),n},e.two=function(e){return 1==(e=""+e).length&&(e="0"+e),e},e.sha512=function(e){function t(e,t){this.highOrder=e,this.lowOrder=t}var n,o,a,i,r,s,l,d,c,u,p=[new t(1779033703,4089235720),new t(3144134277,2227873595),new t(1013904242,4271175723),new t(2773480762,1595750129),new t(1359893119,2917565137),new t(2600822924,725511199),new t(528734635,4215389547),new t(1541459225,327033209)],f=[new t(1116352408,3609767458),new t(1899447441,602891725),new t(3049323471,3964484399),new t(3921009573,2173295548),new t(961987163,4081628472),new t(1508970993,3053834265),new t(2453635748,2937671579),new t(2870763221,3664609560),new t(3624381080,2734883394),new t(310598401,1164996542),new t(607225278,1323610764),new t(1426881987,3590304994),new t(1925078388,4068182383),new t(2162078206,991336113),new t(2614888103,633803317),new t(3248222580,3479774868),new t(3835390401,2666613458),new t(4022224774,944711139),new t(264347078,2341262773),new t(604807628,2007800933),new t(770255983,1495990901),new t(1249150122,1856431235),new t(1555081692,3175218132),new t(1996064986,2198950837),new t(2554220882,3999719339),new t(2821834349,766784016),new t(2952996808,2566594879),new t(3210313671,3203337956),new t(3336571891,1034457026),new t(3584528711,2466948901),new t(113926993,3758326383),new t(338241895,168717936),new t(666307205,1188179964),new t(773529912,1546045734),new t(1294757372,1522805485),new t(1396182291,2643833823),new t(1695183700,2343527390),new t(1986661051,1014477480),new t(2177026350,1206759142),new t(2456956037,344077627),new t(2730485921,1290863460),new t(2820302411,3158454273),new t(3259730800,3505952657),new t(3345764771,106217008),new t(3516065817,3606008344),new t(3600352804,1432725776),new t(4094571909,1467031594),new t(275423344,851169720),new t(430227734,3100823752),new t(506948616,1363258195),new t(659060556,3750685593),new t(883997877,3785050280),new t(958139571,3318307427),new t(1322822218,3812723403),new t(1537002063,2003034995),new t(1747873779,3602036899),new t(1955562222,1575990012),new t(2024104815,1125592928),new t(2227730452,2716904306),new t(2361852424,442776044),new t(2428436474,593698344),new t(2756734187,3733110249),new t(3204031479,2999351573),new t(3329325298,3815920427),new t(3391569614,3928383900),new t(3515267271,566280711),new t(3940187606,3454069534),new t(4118630271,4000239992),new t(116418474,1914138554),new t(174292421,2731055270),new t(289380356,3203993006),new t(460393269,320620315),new t(685471733,587496836),new t(852142971,1086792851),new t(1017036298,365543100),new t(1126000580,2618297676),new t(1288033470,3409855158),new t(1501505948,4234509866),new t(1607167915,987167468),new t(1816402316,1246189591)],h=new Array(64),m=8;function g(e,n){var o,a,i;return o=(65535&e.lowOrder)+(65535&n.lowOrder),i=(65535&(a=(e.lowOrder>>>16)+(n.lowOrder>>>16)+(o>>>16)))<<16|65535&o,o=(65535&e.highOrder)+(65535&n.highOrder)+(a>>>16),new t((65535&(a=(e.highOrder>>>16)+(n.highOrder>>>16)+(o>>>16)))<<16|65535&o,i)}function v(e,n,o,a){var i,r,s;return i=(65535&e.lowOrder)+(65535&n.lowOrder)+(65535&o.lowOrder)+(65535&a.lowOrder),s=(65535&(r=(e.lowOrder>>>16)+(n.lowOrder>>>16)+(o.lowOrder>>>16)+(a.lowOrder>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.highOrder)+(65535&n.highOrder)+(65535&o.highOrder)+(65535&a.highOrder)+(r>>>16),new t((65535&(r=(e.highOrder>>>16)+(n.highOrder>>>16)+(o.highOrder>>>16)+(a.highOrder>>>16)+(i>>>16)))<<16|65535&i,s)}function b(e,n,o,a,i){var r,s,l;return r=(65535&e.lowOrder)+(65535&n.lowOrder)+(65535&o.lowOrder)+(65535&a.lowOrder)+(65535&i.lowOrder),l=(65535&(s=(e.lowOrder>>>16)+(n.lowOrder>>>16)+(o.lowOrder>>>16)+(a.lowOrder>>>16)+(i.lowOrder>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.highOrder)+(65535&n.highOrder)+(65535&o.highOrder)+(65535&a.highOrder)+(65535&i.highOrder)+(s>>>16),new t((65535&(s=(e.highOrder>>>16)+(n.highOrder>>>16)+(o.highOrder>>>16)+(a.highOrder>>>16)+(i.highOrder>>>16)+(r>>>16)))<<16|65535&r,l)}function y(e,n,o){return new t(e.highOrder&n.highOrder^e.highOrder&o.highOrder^n.highOrder&o.highOrder,e.lowOrder&n.lowOrder^e.lowOrder&o.lowOrder^n.lowOrder&o.lowOrder)}function w(e,n,o){return new t(e.highOrder&n.highOrder^~e.highOrder&o.highOrder,e.lowOrder&n.lowOrder^~e.lowOrder&o.lowOrder)}function L(e,n){return n<=32?new t(e.highOrder>>>n|e.lowOrder<<32-n,e.lowOrder>>>n|e.highOrder<<32-n):new t(e.lowOrder>>>n|e.highOrder<<32-n,e.highOrder>>>n|e.lowOrder<<32-n)}function x(e){var n=L(e,28),o=L(e,34),a=L(e,39);return new t(n.highOrder^o.highOrder^a.highOrder,n.lowOrder^o.lowOrder^a.lowOrder)}function j(e){var n=L(e,14),o=L(e,18),a=L(e,41);return new t(n.highOrder^o.highOrder^a.highOrder,n.lowOrder^o.lowOrder^a.lowOrder)}function E(e){var n=L(e,1),o=L(e,8),a=T(e,7);return new t(n.highOrder^o.highOrder^a.highOrder,n.lowOrder^o.lowOrder^a.lowOrder)}function T(e,n){return n<=32?new t(e.highOrder>>>n,e.lowOrder>>>n|e.highOrder<<32-n):new t(0,e.highOrder<<32-n)}var C,A,O,N,M=(e=function(e){return unescape(encodeURIComponent(e))}(e)).length*m;(e=function(e){for(var t=[],n=(1<<m)-1,o=e.length*m,a=0;a<o;a+=m)t[a>>5]|=(e.charCodeAt(a/m)&n)<<32-m-a%32;return t}(e))[M>>5]|=128<<24-M%32,e[31+(M+128>>10<<5)]=M;for(var D=0;D<e.length;D+=32){n=p[0],o=p[1],a=p[2],i=p[3],r=p[4],s=p[5],l=p[6],d=p[7];for(var H=0;H<80;H++)h[H]=H<16?new t(e[2*H+D],e[2*H+D+1]):v((C=h[H-2],A=void 0,O=void 0,N=void 0,A=L(C,19),O=L(C,61),N=T(C,6),new t(A.highOrder^O.highOrder^N.highOrder,A.lowOrder^O.lowOrder^N.lowOrder)),h[H-7],E(h[H-15]),h[H-16]),c=b(d,j(r),w(r,s,l),f[H],h[H]),u=g(x(n),y(n,o,a)),d=l,l=s,s=r,r=g(i,c),i=a,a=o,o=n,n=g(c,u);p[0]=g(n,p[0]),p[1]=g(o,p[1]),p[2]=g(a,p[2]),p[3]=g(i,p[3]),p[4]=g(r,p[4]),p[5]=g(s,p[5]),p[6]=g(l,p[6]),p[7]=g(d,p[7])}var I=[];for(D=0;D<p.length;D++)I.push(p[D].highOrder),I.push(p[D].lowOrder);return function(e){for(var t,n="",o=4*e.length,a=0;a<o;a+=1)t=e[a>>2]>>8*(3-a%4),n+="0123456789abcdef".charAt(t>>4&15)+"0123456789abcdef".charAt(15&t);return n}(I)},e.login||((e.login={}).sha512=e.sha512),(e.image=function(t,n){var o={options:{}},a={input:!1,minWidth:!1,maxWidth:null,maxHeight:null,maxJpegSizeBytes:null,onchange:null,singleFile:!0,remoteParser:null,text:{extensionNotAllowed:"The extension is not allowed",imageTooSmall:"The resolution is too low, try a image with a better resolution. width > 800px"}};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];t.classList.add("jupload"),1==o.options.input&&t.classList.add("input"),o.addImage=function(t){return e.image.create(t)},o.addImages=function(e){1==o.options.singleFile&&(t.innerHTML="");for(var n=0;n<e.length;n++)t.appendChild(o.addImage(e[n]))},o.addFromFile=function(e){if("image"==e.type.split("/")[0]){1==o.options.singleFile&&(t.innerHTML="");var n=new FileReader;n.addEventListener("load",function(n){var a=new Image;a.onload=function(){var n=document.createElement("canvas");n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(a,0,0,n.width,n.height);var i={file:o.getDataURL(n,e.type),extension:e.name.substr(e.name.lastIndexOf(".")+1),name:e.name,size:e.size,lastmodified:e.lastModified};if("data:"==this.src.substr(0,5)){var r=this.src.split(",");i.content=r[1]}var s=o.addImage(i);t.appendChild(s),"function"==typeof o.options.onchange&&o.options.onchange(s,i)},a.src=n.srcElement.result}),n.readAsDataURL(e)}else alert(text.extentionNotAllowed)},o.addFromUrl=function(e){if("data"==e.substr(0,4)||o.options.remoteParser){if("data"==e.substr(0,4)){n=(n=(n=e.split(";"))[0].split("/"))[1]}else{var n=e.substr(e.lastIndexOf(".")+1);e=o.options.remoteParser+e}var a=new Image;a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,e.width,e.height),e.toBlob(function(a){var i={file:window.URL.createObjectURL(a),extension:n};i.content=e.toDataURL(),i.content=i.content.split(","),i.content=i.content[1];var r=o.addImage(i);t.appendChild(r),"function"==typeof o.options.onchange&&o.options.onchange(r,i)})},a.src=e}else console.error("remoteParser not defined in your initialization")},o.getCanvas=function(e){var t=document.createElement("canvas"),n=(o.options.maxWidth||e.width)/e.width,a=(o.options.maxHeight||e.height)/e.height,i=Math.min(n,a,1);return t.width=e.width*i,t.height=e.height*i,t},o.getDataURL=function(e,t){for(var n=.92,a=null,i=e.toDataURL(t,n);o.options.maxJpegSizeBytes&&"image/jpeg"===t&&i.length>o.options.maxJpegSizeBytes&&i.length!==a;)n*=.9,a=i.length,i=e.toDataURL(t,n);return i};var r=document.createElement("input");return r.type="file",r.setAttribute("accept","image/*"),r.onchange=function(){for(var e=0;e<this.files.length;e++)o.addFromFile(this.files[e])},t.addEventListener("click",function(t){e.click(r)}),t.addEventListener("dragenter",function(e){t.style.border="1px dashed #000"}),t.addEventListener("dragleave",function(e){t.style.border="1px solid #eee"}),t.addEventListener("dragstop",function(e){t.style.border="1px solid #eee"}),t.addEventListener("dragover",function(e){e.preventDefault()}),t.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();var n=(e.originalEvent||e).dataTransfer.getData("text/html");if((e.originalEvent||e).dataTransfer.files.length)for(var a=0;a<e.dataTransfer.files.length;a++)o.addFromFile(e.dataTransfer.files[a]);else if(n){1==o.options.singleFile&&(t.innerHTML="");var i=document.createElement("div");i.innerHTML=n;var r=i.querySelectorAll("img");if(r.length)for(a=0;a<r.length;a++)o.addFromUrl(r[a].src)}return t.style.border="1px solid #eee",!1}),t.image=o,o}).create=function(e){e.date||(e.date="");var t=document.createElement("img");return t.setAttribute("data-date",e.lastmodified?e.lastmodified:e.date),t.setAttribute("data-name",e.name),t.setAttribute("data-size",e.size),t.setAttribute("data-small",e.small?e.small:""),t.setAttribute("data-cover",e.cover?1:0),t.setAttribute("data-extension",e.extension),t.setAttribute("src",e.file),t.className="jfile",t.style.width="100%",e.content&&(t.content=e.content),t},e.lazyLoading=function(e,t){t.loadUp&&"function"==typeof t.loadUp||(t.loadUp=function(){return!1}),t.loadDown&&"function"==typeof t.loadDown||(t.loadDown=function(){return!1}),t.timer||(t.timer=100);var n=null,o=function(o){if(null==n){var a=e.scrollTop;e.scrollTop+2*e.clientHeight>=e.scrollHeight?t.loadDown()&&a==e.scrollTop&&(e.scrollTop=e.scrollTop-e.clientHeight):e.scrollTop<=e.clientHeight&&t.loadUp()&&a==e.scrollTop&&(e.scrollTop=e.scrollTop+e.clientHeight),n=setTimeout(function(){n=null},t.timer)}};return e.onscroll=function(e){o()},e.onwheel=function(e){o()},{}},e.loading=function(){var e={},t=null;return e.show=function(){t||((t=document.createElement("div")).className="jloading"),document.body.appendChild(t)},e.hide=function(){t&&document.body.removeChild(t)},e}(),e.mask=function(){var t={},n=0,o=[],a=[];return t.run=function(a,i,r){if(a.toString().length&&i.toString().length){if(void 0===r&&(r="."),e.isNumeric(a))var s=(""+a).split(r),l=(a=s[0],s[1]);else a=""+a;var d;if(n=0,o=[],t.prepare(i),d=a)for(var c=0;c<d.length;c++)null!=d[c]&&t.process(d[c]);if(l)if(t.process(r),d=l)for(c=0;c<d.length;c++)null!=d[c]&&t.process(d[c]);return o.join("")}return""},t.apply=function(i){if(i.target&&!i.target.getAttribute("readonly")){var r=i.target.getAttribute("data-mask");if(r&&i.key.length<2){n=0,o=[],t.prepare(r);var s="";if("DIV"==i.target.tagName){if(i.target.innerText){var l=window.getSelection();if(l&&l.anchorOffset!=l.focusOffset){var d=l.anchorOffset>l.focusOffset?l.focusOffset:l.anchorOffset;s=i.target.innerText.substring(0,d)}else s=i.target.innerText}}else if(i.target.selectionStart<i.target.selectionEnd)s=i.target.value.substring(0,i.target.selectionStart);else s=i.target.value;if(s)for(var c=0;c<s.length;c++)null!=s[c]&&t.process(s[c]);t.process(t.fromKeyCode(i));i.preventDefault();var u=o.join("");"DIV"==i.target.tagName?u!=i.target.innerText&&(i.target.innerText=u,e.focus(i.target)):i.target.value=u,a.length==o.length&&a[a.length-1].length==o[o.length-1].length?i.target.setAttribute("data-completed","true"):i.target.setAttribute("data-completed","false")}}},t.process=function(e){do{if("mm"==a[n])return null==o[n]||""==o[n]?parseInt(e)>1&&parseInt(e)<10?(o[n]="0"+e,n++,!0):parseInt(e)<10&&(o[n]=e,!0):1==o[n]&&o[n]<2&&parseInt(e)<3?(o[n]+=e,n++,!0):0==o[n]&&o[n]<10&&(o[n]+=e,n++,!0);if("dd"==a[n])return null==o[n]||""==o[n]?parseInt(e)>3&&parseInt(e)<10?(o[n]="0"+e,n++,!0):parseInt(e)<10&&(o[n]=e,!0):3==o[n]&&parseInt(e)<2?(o[n]+=e,n++,!0):o[n]<3&&parseInt(e)<10&&(o[n]+=e,n++,!0);if("hh24"==a[n])return null==o[n]||""==o[n]?parseInt(e)>2&&parseInt(e)<10?(o[n]="0"+e,n++,!0):parseInt(e)<10&&(o[n]=e,!0):2==o[n]&&parseInt(e)<4?(o[n]+=e,n++,!0):o[n]<2&&parseInt(e)<10&&(o[n]+=e,n++,!0);if("hh"==a[n])return null==o[n]||""==o[n]?parseInt(e)>1&&parseInt(e)<10?(o[n]="0"+e,n++,!0):parseInt(e)<10&&(o[n]=e,!0):1==o[n]&&parseInt(e)<3?(o[n]+=e,n++,!0):o[n]<1&&parseInt(e)<10&&(o[n]+=e,n++,!0);if("mi"==a[n]||"ss"==a[n])return null==o[n]||""==o[n]?parseInt(e)>5&&parseInt(e)<10?(o[n]="0"+e,n++,!0):parseInt(e)<10&&(o[n]=e,!0):parseInt(e)<10&&(o[n]+=e,n++,!0);if("yy"==a[n]||"yyyy"==a[n])return parseInt(e)<10&&(null==o[n]||""==o[n]?o[n]=e:o[n]+=e,o[n].length==a[n].length&&n++,!0);if("#"==a[n]||"#.##"==a[n]||"#,##"==a[n]||"# ##"==a[n]||"#'##"==a[n]||"###"==a[n]){if(e.match(/[0-9]/g)){if("#.##"==a[n])var t=".";else if("#,##"==a[n])t=",";else if("# ##"==a[n])t=" ";else if("#'##"==a[n])t="'";else t="";if(null==o[n]||""==o[n])o[n]=e;else if(o[n]+=e,t){o[n]=o[n].match(/[0-9]/g).join("");for(var i=[],r=0,s=o[n].length-1;s>=0;s--)i.push(o[n][s]),++r%3||i.push(t);i=i.reverse(),o[n]=i.join(""),o[n].substr(0,1)==t&&(o[n]=o[n].substr(1))}return!0}if("#.##"==a[n]&&"."==e);else if("#,##"==a[n]&&","==e);else if("# ##"==a[n]&&" "==e);else if("#'##"==a[n]&&"'"==e);else if(o[n]&&a[++n]){if(a[n]==e)return o[n]=e,!0;if("0"==a[n]&&a[n+1]==e)return o[++n]=e,!0}return!1}if("0"==a[n])return!!e.match(/[0-9]/g)&&(o[n]=e,n++,!0);if("a"==a[n])return!!e.match(/[a-zA-Z]/g)&&(o[n]=e,n++,!0);if(null!=a[n]){if("\\a"==a[n])var l="a";else if("\\0"==a[n])l="0";else if("[-]"==a[n])if("-"==e||"+"==e)l=e;else l=" ";else l=a[n];if(o[n]=l,e==l)return n++,!0}n++}while(a[n])},t.prepare=function(e){a=[];for(var t=0;t<e.length;t++)e[t].match(/[0-9]|[a-z]|\\/g)?"y"==e[t]&&"y"==e[t+1]&&"y"==e[t+2]&&"y"==e[t+3]?(a.push("yyyy"),t+=3):"y"==e[t]&&"y"==e[t+1]?(a.push("yy"),t++):"m"==e[t]&&"m"==e[t+1]&&"m"==e[t+2]&&"m"==e[t+3]?(a.push("mmmm"),t+=3):"m"==e[t]&&"m"==e[t+1]&&"m"==e[t+2]?(a.push("mmm"),t+=2):"m"==e[t]&&"m"==e[t+1]?(a.push("mm"),t++):"d"==e[t]&&"d"==e[t+1]?(a.push("dd"),t++):"h"==e[t]&&"h"==e[t+1]&&"2"==e[t+2]&&"4"==e[t+3]?(a.push("hh24"),t+=3):"h"==e[t]&&"h"==e[t+1]?(a.push("hh"),t++):"m"==e[t]&&"i"==e[t+1]?(a.push("mi"),t++):"s"==e[t]&&"s"==e[t+1]?(a.push("ss"),t++):"a"==e[t]&&"m"==e[t+1]?(a.push("am"),t++):"p"==e[t]&&"m"==e[t+1]?(a.push("pm"),t++):"\\"==e[t]&&"0"==e[t+1]?(a.push("\\0"),t++):"\\"==e[t]&&"a"==e[t+1]?(a.push("\\a"),t++):a.push(e[t]):"#"==e[t]&&"."==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(a.push("#.##"),t+=3):"#"==e[t]&&","==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(a.push("#,##"),t+=3):"#"==e[t]&&" "==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(a.push("# ##"),t+=3):"#"==e[t]&&"'"==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(a.push("#'##"),t+=3):"#"==e[t]&&"#"==e[t+1]&&"#"==e[t+2]?(a.push("###"),t+=2):"["==e[t]&&"-"==e[t+1]&&"]"==e[t+2]?(a.push("[-]"),t+=2):a.push(e[t])},t.fromKeyCode=function(e){var t={188:"44",109:"45",110:"46",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},n={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"},o=e.which;return t.hasOwnProperty(o)&&(o=t[o]),o=!e.shiftKey&&o>=65&&o<=90?String.fromCharCode(o+32):e.shiftKey&&n.hasOwnProperty(o)?n[o]:96<=o&&o<=105?String.fromCharCode(o-48):String.fromCharCode(o)},"undefined"!=typeof document&&document.addEventListener("keydown",function(t){e.mask&&e.mask.apply(t)}),t}(),(e.modal=function(t,n){var o={options:{}},a={url:null,onopen:null,onclose:null,closed:!1,width:null,height:null,title:null,padding:null};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];!o.options.title&&t.getAttribute("title")&&(o.options.title=t.getAttribute("title"));for(var r=document.createElement("div");t.children[0];)r.appendChild(t.children[0]);for(o.content=document.createElement("div"),o.content.className="jmodal_content",o.content.innerHTML=t.innerHTML;r.children[0];)o.content.appendChild(r.children[0]);o.container=document.createElement("div"),o.container.className="jmodal",o.container.appendChild(o.content),o.options.padding&&(o.content.style.padding=o.options.padding),o.options.width&&(o.container.style.width=o.options.width),o.options.height&&(o.container.style.height=o.options.height),o.options.title?o.container.setAttribute("title",o.options.title):o.container.classList.add("no-title"),t.innerHTML="",t.style.display="none",t.appendChild(o.container);var s=document.createElement("div");return s.className="jmodal_backdrop",s.onclick=function(){o.close()},t.appendChild(s),o.open=function(){t.style.display="block";var n=o.container.getBoundingClientRect();e.getWindowWidth()<n.width?(o.container.style.top="",o.container.style.left="",o.container.classList.add("jmodal_fullscreen"),e.animation.slideBottom(o.container,1)):s.style.display="block",e.modal.current=o,"function"==typeof o.options.onopen&&o.options.onopen(t,o)},o.resetPosition=function(){o.container.style.top="",o.container.style.left=""},o.isOpen=function(){return"none"!=t.style.display},o.close=function(){t.style.display="none",s.style.display="",e.modal.current=null,o.container.classList.remove("jmodal_fullscreen"),"function"==typeof o.options.onclose&&o.options.onclose(t,o)},e.modal.hasEvents||(e.modal.current=o,"ontouchstart"in document.documentElement==!0?document.addEventListener("touchstart",e.modal.mouseDownControls):(document.addEventListener("mousedown",e.modal.mouseDownControls),document.addEventListener("mousemove",e.modal.mouseMoveControls),document.addEventListener("mouseup",e.modal.mouseUpControls)),document.addEventListener("keydown",e.modal.keyDownControls),e.modal.hasEvents=!0),o.options.url?e.ajax({url:o.options.url,method:"GET",dataType:"text/html",success:function(e){o.content.innerHTML=e,o.options.closed||o.open()}}):o.options.closed||o.open(),t.modal=o,o}).current=null,e.modal.position=null,e.modal.keyDownControls=function(t){27==t.which&&e.modal.current&&e.modal.current.close()},e.modal.mouseUpControls=function(t){e.modal.current&&(e.modal.current.container.style.cursor="auto"),e.modal.position=null},e.modal.mouseMoveControls=function(t){if(e.modal.current&&e.modal.position)if(1==t.which||3==t.which){var n=e.modal.position;e.modal.current.container.style.top=n[1]+(t.clientY-n[3])+n[5]/2+"px",e.modal.current.container.style.left=n[0]+(t.clientX-n[2])+n[4]/2+"px",e.modal.current.container.style.cursor="move"}else e.modal.current.container.style.cursor="auto"},e.modal.mouseDownControls=function(t){e.modal.position=[],t.target.classList.contains("jmodal")&&setTimeout(function(){var n=t.target.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0])var o=t.changedTouches[0].clientX,a=t.changedTouches[0].clientY;else o=t.clientX,a=t.clientY;n.width-(o-n.left)<50&&a-n.top<50?setTimeout(function(){e.modal.current.close()},100):t.target.getAttribute("title")&&a-n.top<50&&(document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),e.modal.position=[n.left,n.top,t.clientX,t.clientY,n.width,n.height])},100)},(e.notification=function(t){var n={options:{}},o={icon:null,name:"Notification",date:null,error:null,title:null,message:null,timeout:4e3,autoHide:!0,closeable:!0};for(var a in o)t&&t.hasOwnProperty(a)?n.options[a]=t[a]:n.options[a]=o[a];var i=document.createElement("div");i.className="jnotification",n.options.error&&i.classList.add("jnotification-error");var r=document.createElement("div");r.className="jnotification-container",i.appendChild(r);var s=document.createElement("div");s.className="jnotification-header",r.appendChild(s);var l=document.createElement("div");if(l.className="jnotification-image",s.appendChild(l),n.options.icon){var d=document.createElement("img");d.src=n.options.icon,l.appendChild(d)}var c=document.createElement("div");if(c.className="jnotification-name",c.innerHTML=n.options.name,s.appendChild(c),1==n.options.closeable){var u=document.createElement("div");u.className="jnotification-close",u.onclick=function(){n.hide()},s.appendChild(u)}var p=document.createElement("div");p.className="jnotification-date",s.appendChild(p);var f=document.createElement("div");if(f.className="jnotification-content",r.appendChild(f),n.options.title){var h=document.createElement("div");h.className="jnotification-title",h.innerHTML=n.options.title,f.appendChild(h)}var m=document.createElement("div");if(m.className="jnotification-message",m.innerHTML=n.options.message,f.appendChild(m),n.show=function(){document.body.appendChild(i),e.getWindowWidth()>800?e.animation.fadeIn(i):e.animation.slideTop(i,1)},n.hide=function(){e.getWindowWidth()>800?e.animation.fadeOut(i,function(){i.parentNode&&(i.parentNode.removeChild(i),g&&clearTimeout(g))}):e.animation.slideTop(i,0,function(){i.parentNode&&(i.parentNode.removeChild(i),g&&clearTimeout(g))})},n.show(),1==n.options.autoHide)var g=setTimeout(function(){n.hide()},n.options.timeout);return e.getWindowWidth()<800&&i.addEventListener("swipeup",function(e){n.hide(),e.preventDefault(),e.stopPropagation()}),n}).isVisible=function(){var e=document.querySelector(".jnotification");return!(!e||!e.parentNode)},e.palette=function(e){var t={material:[["#ffebee","#fce4ec","#f3e5f5","#e8eaf6","#e3f2fd","#e0f7fa","#e0f2f1","#e8f5e9","#f1f8e9","#f9fbe7","#fffde7","#fff8e1","#fff3e0","#fbe9e7","#efebe9","#fafafa","#eceff1"],["#ffcdd2","#f8bbd0","#e1bee7","#c5cae9","#bbdefb","#b2ebf2","#b2dfdb","#c8e6c9","#dcedc8","#f0f4c3","#fff9c4","#ffecb3","#ffe0b2","#ffccbc","#d7ccc8","#f5f5f5","#cfd8dc"],["#ef9a9a","#f48fb1","#ce93d8","#9fa8da","#90caf9","#80deea","#80cbc4","#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#bcaaa4","#eeeeee","#b0bec5"],["#e57373","#f06292","#ba68c8","#7986cb","#64b5f6","#4dd0e1","#4db6ac","#81c784","#aed581","#dce775","#fff176","#ffd54f","#ffb74d","#ff8a65","#a1887f","#e0e0e0","#90a4ae"],["#ef5350","#ec407a","#ab47bc","#5c6bc0","#42a5f5","#26c6da","#26a69a","#66bb6a","#9ccc65","#d4e157","#ffee58","#ffca28","#ffa726","#ff7043","#8d6e63","#bdbdbd","#78909c"],["#f44336","#e91e63","#9c27b0","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],["#e53935","#d81b60","#8e24aa","#3949ab","#1e88e5","#00acc1","#00897b","#43a047","#7cb342","#c0ca33","#fdd835","#ffb300","#fb8c00","#f4511e","#6d4c41","#757575","#546e7a"],["#d32f2f","#c2185b","#7b1fa2","#303f9f","#1976d2","#0097a7","#00796b","#388e3c","#689f38","#afb42b","#fbc02d","#ffa000","#f57c00","#e64a19","#5d4037","#616161","#455a64"],["#c62828","#ad1457","#6a1b9a","#283593","#1565c0","#00838f","#00695c","#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#4e342e","#424242","#37474f"],["#b71c1c","#880e4f","#4a148c","#1a237e","#0d47a1","#006064","#004d40","#1b5e20","#33691e","#827717","#f57f17","#ff6f00","#e65100","#bf360c","#3e2723","#212121","#263238"]],fire:[["0b1a6d","840f38","b60718","de030b","ff0c0c","fd491c","fc7521","faa331","fbb535","ffc73a"],["071147","5f0b28","930513","be0309","ef0000","fa3403","fb670b","f9991b","faad1e","ffc123"],["03071e","370617","6a040f","9d0208","d00000","dc2f02","e85d04","f48c06","faa307","ffba08"],["020619","320615","61040d","8c0207","bc0000","c82a02","d05203","db7f06","e19405","efab00"],["020515","2d0513","58040c","7f0206","aa0000","b62602","b94903","c57205","ca8504","d89b00"]],baby:[["eddcd2","fff1e6","fde2e4","fad2e1","c5dedd","dbe7e4","f0efeb","d6e2e9","bcd4e6","99c1de"],["e1c4b3","ffd5b5","fab6ba","f5a8c4","aacecd","bfd5cf","dbd9d0","baceda","9dc0db","7eb1d5"],["daa990","ffb787","f88e95","f282a9","8fc4c3","a3c8be","cec9b3","9dbcce","82acd2","649dcb"],["d69070","ff9c5e","f66770","f05f8f","74bbb9","87bfae","c5b993","83aac3","699bca","4d89c2"],["c97d5d","f58443","eb4d57","e54a7b","66a9a7","78ae9c","b5a67e","7599b1","5c88b7","4978aa"]]};return t[e]?t[e]:t.material},e.picker=function(e,t){var n={options:{}},o={value:null,data:null,render:null,onchange:null,width:null,header:!0,right:!1,content:!1};for(var a in o)t&&t.hasOwnProperty(a)?n.options[a]=t[a]:n.options[a]=o[a];t.options&&(n.options.data=t.options),null===n.options.value&&(n.options.value=Object.keys(n.options.data)[0]);var i=null,r=null;return e.classList.add("jpicker"),e.setAttribute("tabindex","900"),n.init=function(){(i=document.createElement("div")).classList.add("jpicker-header"),!1===n.options.header&&(i.style.display="none"),n.options.width&&(i.style.width=parseInt(n.options.width)+"px"),i.innerHTML=n.options.value&&n.options.data[n.options.value]?n.options.data[n.options.value]:"<div><br/></div>",(r=document.createElement("div")).classList.add("jpicker-content"),e.appendChild(i),e.appendChild(r);for(var t=Object.keys(n.options.data),o=0;o<t.length;o++){var a=document.createElement("div");a.k=t[o],a.v=n.options.data[t[o]],a.innerHTML=n.getLabel(t[o]),a.onclick=function(){n.setValue(this.k),"function"==typeof n.options.onchange&&n.options.onchange(e,n,this.v,this.k)},r.appendChild(a)}n.setValue(n.options.value)},n.setValue=function(t){if(n.options.content)var o='<i class="material-icons">'+n.options.content+"</i>";else o=n.getLabel(t);i.innerHTML=o,n.options.value=o,e.value!=n.options.value&&(e.value=n.options.value,"function"==typeof e.onchange&&e.onchange({type:"change",target:e,value:e.value}))},n.getLabel=function(e){var t=n.options.data[e];return"function"==typeof n.options.render&&(t=n.options.render(t)),t},n.open=function(){e.classList.add("jpicker-focus"),e.focus();var t=i.getBoundingClientRect(),o=r.getBoundingClientRect();window.innerHeight<t.bottom+o.height?r.style.marginTop=-1*(o.height+4)+"px":r.style.marginTop=t.height+2+"px",!0===n.options.right&&(r.style.marginLeft=-1*o.width+24+"px")},e.onclick=function(){e.classList.contains("jpicker-focus")?e.classList.remove("jpicker-focus"):n.open()},e.onblur=function(){setTimeout(function(){e.classList.remove("jpicker-focus")},250)},n.init(),e.change=n.setValue,e.picker=n,n},e.progressbar=function(e,t){var n={options:{}},o={value:0,onchange:null,width:null};for(var a in o)t&&t.hasOwnProperty(a)?n.options[a]=t[a]:n.options[a]=o[a];e.classList.add("jprogressbar"),e.setAttribute("tabindex",1),e.setAttribute("data-value",n.options.value);var i=document.createElement("div");i.style.width=n.options.value+"%",i.style.color="#fff",e.appendChild(i),n.options.width&&(e.style.width=n.options.width),n.setValue=function(t){t=parseInt(t),n.options.value=t,i.style.width=t+"%",e.setAttribute("data-value",t+"%"),e.style.color=t<6?"#000":"#fff",n.options.value=t,"function"==typeof n.options.onchange&&n.options.onchange(e,t),e.value!=n.options.value&&(e.value=n.options.value,"function"==typeof e.onchange&&e.onchange({type:"change",target:e,value:e.value}))},n.getValue=function(){return n.options.value};var r=function(t){if(t.which){var o=e.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0]){var a=t.changedTouches[0].clientX;t.changedTouches[0].clientY}else a=t.clientX,t.clientY;n.setValue(Math.round((a-o.left)/o.width*100))}};return"touchstart"in document.documentElement==!0?(e.addEventListener("touchstart",r),e.addEventListener("touchend",r)):(e.addEventListener("mousedown",r),e.addEventListener("mousemove",r)),e.change=n.setValue,e.progressbar=n,n},e.rating=function(e,t){if(e.classList.contains("jrating"))return e.rating.setOptions(t);var n={options:{},setOptions:function(t){var o={number:5,value:0,tooltip:["Very bad","Bad","Average","Good","Very good"],onchange:null};for(var a in o)t&&t.hasOwnProperty(a)?n.options[a]=t[a]:n.options[a]=o[a];e.innerHTML="";for(var i=0;i<n.options.number;i++){var r=document.createElement("div");r.setAttribute("data-index",i+1),r.setAttribute("title",n.options.tooltip[i]),e.appendChild(r)}if(n.options.value)for(i=0;i<n.options.number;i++)i<n.options.value&&e.children[i].classList.add("jrating-selected")},setValue:function(t){for(var o=0;o<n.options.number;o++)o<t?e.children[o].classList.add("jrating-selected"):(e.children[o].classList.remove("jrating-over"),e.children[o].classList.remove("jrating-selected"));n.options.value=t,"function"==typeof n.options.onchange&&n.options.onchange(e,t),e.value!=n.options.value&&(e.value=n.options.value,"function"==typeof e.onchange&&e.onchange({type:"change",target:e,value:e.value}))},getValue:function(){return n.options.value}};return n.setOptions(t),e.classList.add("jrating"),e.addEventListener("click",function(e){var t=e.target.getAttribute("data-index");null!=t&&(t==n.options.value?n.setValue(0):n.setValue(t))}),e.addEventListener("mouseover",function(t){for(var o=t.target.getAttribute("data-index"),a=0;a<n.options.number;a++)a<o?e.children[a].classList.add("jrating-over"):e.children[a].classList.remove("jrating-over")}),e.addEventListener("mouseout",function(t){for(var o=0;o<n.options.number;o++)e.children[o].classList.remove("jrating-over")}),e.change=n.setValue,e.rating=n,n},e.slider=function(t,n){var o={options:{},currentImage:null};if(n&&(o.options=n),o.options.items=[],t.classList.contains("jslider"))a=t.querySelector("slider-container");else{var a;if(t.classList.add("jslider"),(a=document.createElement("div")).className="jslider-container",t.children.length>0)for(var i=0;i<t.children.length;i++)o.options.items.push(t.children[i]);if(o.options.items.length>0)for(i=0;i<o.options.items.length;i++){o.options.items[i].classList.add("jfile"),(r=o.options.items[i].src.lastIndexOf("/"))<0?o.options.items[i].setAttribute("data-name",o.options.items[i].src):o.options.items[i].setAttribute("data-name",o.options.items[i].src.substr(r+1));var r=o.options.items[i].src.lastIndexOf("/");a.appendChild(o.options.items[i])}t.appendChild(a);var s=document.createElement("div");s.className="jslider-close",s.innerHTML="",s.onclick=function(){o.close()},t.appendChild(s)}if(o.show=function(e){if(!e)e=a.children[0];a.classList.contains("jslider-preview")||(a.classList.add("jslider-preview"),s.style.display="block");for(var t=0;t<a.children.length;t++)a.children[t].style.display="none";e.style.display="block",e.previousSibling?a.classList.add("jslider-left"):a.classList.remove("jslider-left"),e.nextSibling?a.classList.add("jslider-right"):a.classList.remove("jslider-right"),o.currentImage=e},o.open=function(){o.show(),"function"==typeof o.options.onopen&&o.options.onopen(t)},o.close=function(){a.classList.remove("jslider-preview"),a.classList.remove("jslider-left"),a.classList.remove("jslider-right");for(var e=0;e<a.children.length;e++)a.children[e].style.display="";s.style.display="",o.currentImage=null,"function"==typeof o.options.onclose&&o.options.onclose(t)},o.reset=function(){a.innerHTML=""},o.addFile=function(e,n){var i=document.createElement("img");i.setAttribute("data-lastmodified",e.lastmodified),i.setAttribute("data-name",e.name),i.setAttribute("data-size",e.size),i.setAttribute("data-extension",e.extension),i.setAttribute("data-cover",e.cover),i.setAttribute("src",e.file),i.className="jfile",a.appendChild(i),o.options.items.push(i),n||"function"==typeof o.options.onchange&&o.options.onchange(t,e)},o.addFiles=function(e){for(var t=0;t<e.length;t++)o.addFile(e[t])},o.next=function(){o.currentImage.nextSibling&&o.show(o.currentImage.nextSibling)},o.prev=function(){o.currentImage.previousSibling&&o.show(o.currentImage.previousSibling)},o.getData=function(){return e.files(a).get()},o.options.data&&o.options.data.length)for(i=0;i<o.options.data.length;i++)o.options.data[i]&&o.addFile(o.options.data[i]);if(o.options.allowAttachment){var l=document.createElement("input");l.type="file",l.className="slider-attachment",l.setAttribute("accept","image/*"),l.style.display="none",l.onchange=function(){for(var e=[],t=0;t<this.files.length;t++){if("image"==this.files[t].type.split("/")[0]){var n=this.files[t].name;n=(n=n.split("."))[n.length-1];var a={size:this.files[t].size,name:this.files[t].name,extension:n,cover:0,lastmodified:this.files[t].lastModified};e[t]=new FileReader,e[t].addEventListener("load",function(e){a.file=e.target.result,o.addFile(a)},!1),e[t].readAsDataURL(this.files[t])}else alert("The extension is not allowed")}};var d=document.createElement("i");d.innerHTML="attachment",d.className="jslider-attach material-icons",d.onclick=function(){e.click(l)},t.appendChild(l),t.appendChild(d)}var c=null,u=function(e){if("IMG"==e.target.tagName){e.target;c=setTimeout(function(){"data"==e.target.src.substr(0,4)?e.target.remove():e.target.classList.contains("jremove")?e.target.classList.remove("jremove"):e.target.classList.add("jremove"),"function"==typeof o.options.onchange&&o.options.onchange(t,e.target)},1e3)}},p=function(e){c&&clearTimeout(c),"IMG"==e.target.tagName?e.target.classList.contains("jremove")||o.show(e.target):e.target.clientWidth-e.offsetX<40?o.next():e.offsetX<40&&o.prev()};return a.addEventListener("mousedown",u),a.addEventListener("touchstart",u),a.addEventListener("mouseup",p),a.addEventListener("touchend",p),t.addEventListener("swipeleft",function(e){o.next(),e.preventDefault(),e.stopPropagation()}),t.addEventListener("swiperight",function(e){o.prev(),e.preventDefault(),e.stopPropagation()}),e.slider.hasEvents||(document.addEventListener("keydown",function(e){27==e.which&&o.close()}),e.slider.hasEvents=!0),t.slider=o,o},e.sorting=function(e,t){var n={options:{}},o={pointer:null,direction:null,ondragstart:null,ondragend:null,ondrop:null},a=null;for(var i in o)t&&t.hasOwnProperty(i)?n.options[i]=t[i]:n.options[i]=o[i];e.classList.add("jsorting"),e.addEventListener("dragstart",function(t){var o=Array.prototype.indexOf.call(t.target.parentNode.children,t.target);a={element:t.target,o:o,d:o},t.target.style.opacity="0.25","function"==typeof n.options.ondragstart&&n.options.ondragstart(e,t.target,t)}),e.addEventListener("dragover",function(e){if(e.preventDefault(),r(e.target)&&a&&"true"==e.target.getAttribute("draggable")&&a.element!=e.target){if(n.options.direction)t=e.target.clientWidth/2>e.offsetX;else var t=e.target.clientHeight/2>e.offsetY;t?e.target.parentNode.insertBefore(a.element,e.target):e.target.parentNode.insertBefore(a.element,e.target.nextSibling),a.d=Array.prototype.indexOf.call(e.target.parentNode.children,a.element)}}),e.addEventListener("dragleave",function(e){e.preventDefault()}),e.addEventListener("dragend",function(t){t.preventDefault(),a&&("function"==typeof n.options.ondragend&&n.options.ondragend(e,a.element,t),a.o<a.d?t.target.parentNode.insertBefore(a.element,t.target.parentNode.children[a.o]):t.target.parentNode.insertBefore(a.element,t.target.parentNode.children[a.o].nextSibling),a.element.style.opacity="",a=null)}),e.addEventListener("drop",function(t){t.preventDefault(),a&&a.o!=a.d&&"function"==typeof n.options.ondrop&&n.options.ondrop(e,a.o,a.d,a.element,t.target,t),a.element.style.opacity="",a=null});for(var r=function(e){var t=!1;return function e(n){n.className&&n.classList.contains("jsorting")&&(t=!0),t||e(n.parentNode)}(e),t},s=0;s<e.children.length;s++)e.children[s].hasAttribute("draggable")||e.children[s].setAttribute("draggable","true");return e},e.tabs=function(t,n){var o={options:{}},a={data:[],position:null,allowCreate:!1,allowChangePosition:!1,onclick:null,onload:null,onchange:null,oncreate:null,ondelete:null,onbeforecreate:null,onchangeposition:null,animation:!1,hideHeaders:!1,padding:null};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];t.classList.add("jtabs");var r=null,s=null,l=null,d=function(e){"function"==typeof o.headers.scrollTo?o.headers.scrollTo({left:e,behavior:"smooth"}):o.headers.scrollLeft=e,e<=1?r.classList.add("disabled"):r.classList.remove("disabled"),e>=o.headers.scrollWidth-o.headers.offsetWidth?s.classList.add("disabled"):s.classList.remove("disabled"),o.headers.scrollWidth<=o.headers.offsetWidth?(r.style.display="none",s.style.display="none"):(r.style.display="",s.style.display="")};if(o.open=function(e){for(var n=null,a=0;a<o.headers.children.length;a++)o.headers.children[a].classList.contains("jtabs-selected")&&(n=a),o.headers.children[a].classList.remove("jtabs-selected"),o.content.children[a]&&o.content.children[a].classList.remove("jtabs-selected");if(o.headers.children[e].classList.add("jtabs-selected"),o.content.children[e]&&o.content.children[e].classList.add("jtabs-selected"),n!=e&&"function"==typeof o.options.onchange&&o.content.children[e]&&o.options.onchange(t,o,e,o.headers.children[e],o.content.children[e]),1==o.options.hideHeaders&&o.headers.children.length<3&&0==o.options.allowCreate)o.headers.parentNode.style.display="none";else{o.headers.parentNode.style.display="",1==o.options.animation&&function(e){var t=o.headers.children[e].getBoundingClientRect();l.style.width=t.width+"px",l.style.left=o.headers.children[e].offsetLeft+"px",l.style.bottom="0px"}(e);var i=o.headers.children[e].offsetLeft,r=i+o.headers.children[e].offsetWidth,s=o.headers.scrollLeft,c=s+o.headers.offsetWidth;s<=i&&c>=r||d(i-1)}},o.selectIndex=function(e){var t=Array.prototype.indexOf.call(o.headers.children,e);return t>=0&&o.open(t),t},o.rename=function(e,t){t||(t=prompt("New title",o.headers.children[e].innerText)),o.headers.children[e].innerText=t,o.open(e)},o.create=function(e,n){if("function"==typeof o.options.onbeforecreate){var a=o.options.onbeforecreate(t);if(!1===a)return!1;e=a}var i=o.appendElement(e);return"function"==typeof o.options.oncreate&&o.options.oncreate(t,i),i},o.remove=function(e){return o.deleteElement(e)},o.nextNumber=function(){for(var e=0,t=0;t<o.headers.children.length;t++){var n=o.headers.children[t].innerText.match(/[0-9].*/);n>e&&(e=parseInt(n))}return e?e++:e=1,e},o.deleteElement=function(e){if(!o.headers.children[e])return!1;o.headers.removeChild(o.headers.children[e]),o.content.removeChild(o.content.children[e]),o.open(0),"function"==typeof o.options.ondelete&&o.options.ondelete(t,e)},o.appendElement=function(e){if(!e)e=prompt("Title?","");if(e){var t=document.createElement("div");o.content.appendChild(t);var n=document.createElement("div");return n.innerHTML=e,n.content=t,o.headers.insertBefore(n,o.headers.lastChild),o.options.allowChangePosition&&n.setAttribute("draggable","true"),o.selectIndex(n),t}},o.getActive=function(){for(var e=0;e<o.headers.children.length;e++)if(o.headers.children[e].classList.contains("jtabs-selected"))return e;return 0},o.updatePosition=function(e,t){e>t?o.content.insertBefore(o.content.children[e],o.content.children[t]):o.content.insertBefore(o.content.children[e],o.content.children[t].nextSibling),o.open(t),"function"==typeof o.options.onchangeposition&&o.options.onchangeposition(o.headers,e,t)},o.move=function(e,t){e>t?o.headers.insertBefore(o.headers.children[e],o.headers.children[t]):o.headers.insertBefore(o.headers.children[e],o.headers.children[t].nextSibling),o.updatePosition(e,t)},o.init=function(){t.innerHTML="",o.headers=document.createElement("div"),o.content=document.createElement("div"),o.headers.classList.add("jtabs-headers"),o.content.classList.add("jtabs-content"),o.options.padding&&(o.content.style.padding=parseInt(o.options.padding)+"px");var n=document.createElement("div");n.className="jtabs-headers-container",n.appendChild(o.headers);var a=document.createElement("div");if(a.className="jtabs-controls",a.setAttribute("draggable","false"),n.appendChild(a),"bottom"==o.options.position?(t.appendChild(o.content),t.appendChild(n)):(t.appendChild(n),t.appendChild(o.content)),1==o.options.allowCreate){var i=document.createElement("div");i.className="jtabs-add",i.onclick=function(){o.create()},a.appendChild(i)}(r=document.createElement("div")).className="jtabs-prev",r.onclick=function(){d(o.headers.scrollLeft-o.headers.offsetWidth)},a.appendChild(r),(s=document.createElement("div")).className="jtabs-next",s.onclick=function(){d(o.headers.scrollLeft+o.headers.offsetWidth)},a.appendChild(s);for(var c=0;c<o.options.data.length;c++){if(o.options.data[c].titleElement)var u=o.options.data[c].titleElement;else u=document.createElement("div");if(o.options.data[c].icon){var p=document.createElement("div"),f=document.createElement("i");f.classList.add("material-icons"),f.innerHTML=o.options.data[c].icon,p.appendChild(f),u.appendChild(p)}if(o.options.data[c].title){var h=document.createTextNode(o.options.data[c].title);u.appendChild(h)}if(o.options.data[c].width&&(u.style.width=o.options.data[c].width),o.options.data[c].contentElement)var m=o.options.data[c].contentElement;else(m=document.createElement("div")).innerHTML=o.options.data[c].content;o.headers.appendChild(u),o.content.appendChild(m)}(l=document.createElement("div")).className="jtabs-border",o.headers.appendChild(l),o.options.animation&&t.classList.add("jtabs-animation"),o.headers.addEventListener("click",function(e){if(e.target.parentNode.classList.contains("jtabs-headers"))var n=e.target;else if("I"==e.target.tagName)n=e.target.parentNode.parentNode;else n=e.target.parentNode;var a=o.selectIndex(n);"function"==typeof o.options.onclick&&o.options.onclick(t,o,a,o.headers.children[a],o.content.children[a])}),o.headers.addEventListener("contextmenu",function(e){o.selectIndex(e.target)}),o.headers.children.length&&o.open(0),d(0),1==o.options.allowChangePosition&&e.sorting(o.headers,{direction:1,ondrop:function(e,t,n){o.updatePosition(t,n)}}),"function"==typeof o.options.onload&&o.options.onload(t,o)},t.children[0]&&t.children[0].children.length)for(var c=0;c<t.children[0].children.length;c++){var u=o.options.data&&o.options.data[c]?o.options.data[c]:{};t.children[1]&&t.children[1].children[c]?(u.titleElement=t.children[0].children[c],u.contentElement=t.children[1].children[c]):u.contentElement=t.children[0].children[c],o.options.data[c]=u}var p=!1;if(o.options.data)for(c=0;c<o.options.data.length;c++)o.options.data[c].url&&(e.ajax({url:o.options.data[c].url,type:"GET",dataType:"text/html",index:c,success:function(e){o.options.data[this.index].content=e},complete:function(){o.init()}}),p=!0);return p||o.init(),t.tabs=o,o},e.tags=function(t,n){if(t.classList.contains("jtags"))return t.tags.setOptions(n);var o={options:{}},a=null,i=null,r=0,s=0;o.setOptions=function(e){var n={value:null,limit:null,limitMessage:"The limit of entries is: ",search:null,placeholder:null,validation:null,onbeforechange:null,onchange:null,onfocus:null,onblur:null,onload:null,colors:null};for(var a in n)e&&e.hasOwnProperty(a)?o.options[a]=e[a]:o.options[a]=n[a];o.options.placeholder?t.setAttribute("data-placeholder",o.options.placeholder):t.removeAttribute("data-placeholder"),t.placeholder=o.options.placeholder,o.options.value&&o.options.value!=t.value&&o.setValue(o.options.value)},o.add=function(n,i){"function"==typeof o.options.onbeforechange&&(null!=(p=o.options.onbeforechange(t,o,n))&&(n=p));if(a&&(a.style.display=""),o.options.limit>0&&t.children.length>=o.options.limit)alert(o.options.limitMessage+" "+o.options.limit);else{var r=c();if(n&&"string"!=typeof n){r&&r.parentNode.classList.contains("jtags")&&(r.innerText.replace("\n","")||t.removeChild(r));for(var s=0;s<=n.length;s++)if(!o.options.limit||t.children.length<o.options.limit){f=document.createElement("div");if(n[s]&&"string"!=typeof n[s])u=n[s].text,p=n[s].value;else{var u,p=u=n[s]||"";u||(u="<br>")}f.innerHTML=u,f.setAttribute("data-value",p),t.appendChild(f)}}else{var f;(f=document.createElement("div")).innerHTML=n||"<br>",f.setAttribute("data-value",n),r&&r.parentNode.classList.contains("jtags")?t.insertBefore(f,r.nextSibling):t.appendChild(f)}i&&setTimeout(function(){e.focus(f)},0),d(),l()}},o.remove=function(e){e.parentNode.removeChild(e),t.children.length||o.add("")},o.getData=function(){for(var e=[],n=0;n<t.children.length;n++){var o=t.children[n].innerText.replace("\n",""),a=t.children[n].getAttribute("data-value");a||(a=o),(o||a)&&e.push({text:o,value:a})}return e},o.getValue=function(e){var n=null;if(null!=e)(n=t.children[e].getAttribute("data-value"))||(n=t.children[e].innerText.replace("\n",""));else{for(var a=[],i=0;i<t.children.length;i++)(n=t.children[i].innerText.replace("\n",""))&&a.push(o.getValue(i));n=a.join(",")}return n},o.setValue=function(e){if(e)if(Array.isArray(e))o.add(e);else{var n=(""+e).trim(),a=u(n);t.innerHTML="",o.add(a)}else o.reset()},o.reset=function(){t.classList.add("jtags-empty"),t.innerHTML="<div><br></div>",l()},o.isValid=function(){for(var e=0,n=0;n<t.children.length;n++)t.children[n].classList.contains("jtags_error")&&e++;return 0==e},o.selectIndex=function(e){i="";var t=c();t.innerText=e.getAttribute("data-text"),e.getAttribute("data-value")&&t.setAttribute("data-value",e.getAttribute("data-value")),a&&(a.style.display="",a.innerHTML=""),t.classList.remove("jtags_error"),o.add("",!0)},o.search=function(n){if(!a){(h=document.createElement("div")).style.position="relative",t.parentNode.insertBefore(h,t.nextSibling),(a=document.createElement("div")).classList.add("jtags_search"),h.appendChild(a);var s=function(e){if(e.target.classList.contains("jtags_search_item"))var t=e.target;else t=e.target.parentNode;o.selectIndex(t)};"touchstart"in document.documentElement==!0?a.addEventListener("touchstart",s):a.addEventListener("mousedown",s)}var l=n.innerText;if(l!=i)if(i=l,r=0,Array.isArray(o.options.search)){for(var d=[],c=0;c<o.options.search.length&&d.length<=10;)o.options.search[c].includes(i)&&d.push(o.options.search[c]),c++;if(a.innerHTML="",d.length){a.style.display="block";var u=d.length<11?d.length:10;for(c=0;c<u;c++){var p,f,h;"string"==typeof d[c]?(p=d[c],f=d[c]):(p=d[1].text,f=d[1].value),(h=document.createElement("div")).setAttribute("data-value",f),h.setAttribute("data-text",p),h.className="jtags_search_item",0==c&&h.classList.add("selected");var m=document.createElement("div");m.innerHTML=p,h.appendChild(m),a.appendChild(h)}}else a.style.display=""}else e.ajax({url:o.options.search+i,method:"GET",dataType:"json",success:function(e){if(a.innerHTML="",e.length){a.style.display="block";for(var t=e.length<11?e.length:10,n=0;n<t;n++){var o=e[n].text;!o&&e[n].name&&(o=e[n].name);var i=e[n].value;!i&&e[n].id&&(i=e[n].id);var r=document.createElement("div");r.setAttribute("data-value",i),r.setAttribute("data-text",o),r.className="jtags_search_item",0==n&&r.classList.add("selected");var s=document.createElement("img");e[n].image?s.src=e[n].image:s.style.display="none",r.appendChild(s);var l=document.createElement("div");l.innerHTML=o,r.appendChild(l),a.appendChild(r)}}else a.style.display=""}})},o.destroy=function(){t.removeEventListener("mouseup",g),t.removeEventListener("keydown",f),t.removeEventListener("keyup",h),t.removeEventListener("paste",m),t.removeEventListener("focus",v),t.removeEventListener("blur",b),t.parentNode.removeChild(t)};var l=function(){o.options.value=o.getValue(),"function"==typeof o.options.onchange&&o.options.onchange(t,o,o.options.value),t.value!=o.options.value&&(t.value=o.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))},d=function(){for(var e=0;e<t.children.length;e++)o.getValue(e)?(t.children[e].classList.add("jtags_label"),"function"==typeof o.options.validation&&(o.getValue(e)?o.options.validation(t.children[e],t.children[e].innerText,t.children[e].getAttribute("data-value"))?t.children[e].classList.remove("jtags_error"):t.children[e].classList.add("jtags_error"):t.children[e].classList.remove("jtags_error"))):t.children[e].classList.remove("jtags_label")},c=function(){var e=document.getSelection().anchorNode;return e?3==e.nodeType?e.parentNode:e:null},u=function(e){var t=[],n="";if(e=e.trim()){for(var o=0;o<e.length;o++)","==e[o]||";"==e[o]||"\n"==e[o]?n&&(t.push(n.trim()),n=""):n+=e[o];n&&t.push(n)}return t},p=0,f=function(e){if(p=window.getSelection().anchorOffset,!t.children.length){var n=document.createElement("div");n.innerHTML="<div><br/></div>",t.appendChild(n)}if("Tab"===e.key||";"===e.key||","===e.key)window.getSelection().anchorOffset>1&&(!o.options.limit||t.children.length<o.options.limit)&&o.add("",!0),e.preventDefault();else if("Enter"==e.key){if(a&&""!=a.style.display)o.selectIndex(a.children[r]);else window.getSelection().anchorOffset>1&&(!o.options.limit||t.children.length<o.options.limit)&&o.add("",!0);e.preventDefault()}else"ArrowUp"===e.key?a&&""!=a.style.display&&(a.children[r].classList.remove("selected"),r>0&&r--,a.children[r].classList.add("selected"),e.preventDefault()):"ArrowDown"===e.key?a&&""!=a.style.display&&(a.children[r].classList.remove("selected"),r<9&&r++,a.children[r].classList.add("selected"),e.preventDefault()):"Backspace"==e.key&&1==t.children.length&&window.getSelection().anchorOffset<1&&e.preventDefault()},h=function(e){if(39==e.which){var n=window.getSelection().anchorOffset;n>1&&n==p&&o.add("",!0)}else if(13==e.which||38==e.which||40==e.which)e.preventDefault();else if(8==e.which)t.innerHTML||o.add("",!0),e.preventDefault();else if(46==e.which){if(!t.children.length){var a=document.createElement("div");a.innerHTML="<div><br/></div>",t.appendChild(a)}e.preventDefault()}else s&&clearTimeout(s),s=setTimeout(function(){var e=function(){var e=document.getSelection().anchorNode;return 3==e.nodeType?e.parentNode:e}();e&&o.options.search&&o.search(e),s=null},300);d()},m=function(e){if(e.clipboardData||e.originalEvent.clipboardData){(e.originalEvent||e).clipboardData.getData("text/html");var t=(e.originalEvent||e).clipboardData.getData("text/plain")}else if(window.clipboardData)window.clipboardData.getData("Html"),t=window.clipboardData.getData("Text");o.setValue(t),e.preventDefault()},g=function(e){if(e.target.parentNode&&e.target.parentNode.classList.contains("jtags")&&(e.target.classList.contains("jtags_label")||e.target.classList.contains("jtags_error"))){var t=e.target.getBoundingClientRect();t.width-(e.clientX-t.left)<16&&o.remove(e.target)}a&&(a.style.display="")},v=function(e){if((!t.children.length||o.getValue(t.children.length-1))&&(!o.options.limit||t.children.length<o.options.limit)){var n=document.createElement("div");n.innerHTML="<br>",t.appendChild(n)}"function"==typeof o.options.onfocus&&o.options.onfocus(t,o,o.getValue()),t.classList.add("jtags-focus")},b=function(e){a&&setTimeout(function(){a.style.display=""},200);for(var n=0;n<t.children.length-1;n++)o.getValue(n)||t.removeChild(t.children[n]);"function"==typeof o.options.onblur&&o.options.onblur(t,o,o.getValue()),l(),t.classList.remove("jtags-focus"),t.children[0].innerText.trim()?t.classList.remove("jtags-empty"):t.classList.add("jtags-empty")};return o.setOptions(n),o.setValue(o.options.value),"touchend"in document.documentElement==1?t.addEventListener("touchend",g):t.addEventListener("mouseup",g),t.addEventListener("keydown",f),t.addEventListener("keyup",h),t.addEventListener("paste",m),t.addEventListener("focus",v),t.addEventListener("blur",b),t.classList.add("jtags"),t.setAttribute("contenteditable",!0),t.setAttribute("spellcheck",!1),"function"==typeof o.options.onload&&o.options.onload(t,o),t.change=o.setValue,t.tags=o,o},e.toolbar=function(t,n){var o={options:{}},a={app:null,container:!1,badge:!1,title:!1,items:[]};for(var i in a)n&&n.hasOwnProperty(i)?o.options[i]=n[i]:o.options[i]=a[i];!t&&n.app&&n.app.el&&(t=document.createElement("div"),n.app.el.appendChild(t));var r=document.createElement("div");r.classList.add("jtoolbar-item"),r.classList.add("jtoolbar-arrow");var s=document.createElement("div");s.classList.add("jtoolbar-floating"),r.appendChild(s),o.selectItem=function(e){for(var t=d.children,n=0;n<t.length;n++)e!=t[n]&&t[n].classList.remove("jtoolbar-selected");e.classList.add("jtoolbar-selected")},o.hide=function(){e.animation.slideBottom(t,0,function(){t.style.display="none"})},o.show=function(){t.style.display="",e.animation.slideBottom(t,1)},o.get=function(){return t},o.setBadge=function(e,t){d.children[e].children[1].firstChild.innerHTML=t},o.destroy=function(){toolbar.remove(),t.innerHTML=""};var l=function(){this.classList.contains("jtoolbar-active")?this.classList.remove("jtoolbar-active"):this.classList.add("jtoolbar-active")};o.create=function(n){d.innerHTML="";for(var a=0;a<n.length;a++){var i=document.createElement("div");if(i.classList.add("jtoolbar-item"),n[a].width&&(i.style.width=parseInt(n[a].width)+"px"),n[a].k&&(i.k=n[a].k),n[a].tooltip&&i.setAttribute("title",n[a].tooltip),n[a].id&&i.setAttribute("id",n[a].id),n[a].state&&(i.toggleState=l),n[a].active&&i.classList.add("jtoolbar-active"),"select"==n[a].type||"dropdown"==n[a].type)"function"==typeof n[a].onchange&&(n[a].onchange=function(e){return function(n,a,i,r){e(t,o,n,i,r)}}(n[a].onchange)),e.picker(i,n[a]);else if("divisor"==n[a].type)i.classList.add("jtoolbar-divisor");else if("label"==n[a].type)i.classList.add("jtoolbar-label"),i.innerHTML=n[a].content;else{var r=document.createElement("i");if(void 0===n[a].class)r.classList.add("material-icons");else for(var s=n[a].class.split(" "),c=0;c<s.length;c++)r.classList.add(s[c]);if(r.innerHTML=n[a].content?n[a].content:"",i.appendChild(r),1==o.options.badge){var u=document.createElement("div");u.classList.add("jbadge");var p=document.createElement("div");p.innerHTML=n[a].badge?n[a].badge:"",u.appendChild(p),i.appendChild(u)}if(n[a].title)if(1==o.options.title){var f=document.createElement("span");f.innerHTML=n[a].title,i.appendChild(f)}else i.setAttribute("title",n[a].title);o.options.app&&n[a].route&&(i.route=n[a].route,i.onclick=function(){o.options.app.pages(this.route)},o.options.app.pages(n[a].route,{toolbarItem:i,closed:!0}))}n[a].onclick&&(i.onclick=function(e){return function(){n[e].onclick(t,o,this)}}(a)),d.appendChild(i)}},o.resize=function(){t.style.width=t.parentNode.offsetWidth,d.appendChild(r)},t.classList.add("jtoolbar"),1==o.options.container&&t.classList.add("jtoolbar-container"),t.innerHTML="",t.onclick=function(t){var n=e.findElement(t.target,"jtoolbar-item");n&&o.selectItem(n),t.target.classList.contains("jtoolbar-arrow")&&(t.target.classList.add("jtoolbar-arrow-selected"),t.target.children[0].focus())};var d=document.createElement("div");return t.appendChild(d),o.options.app&&t.classList.add("jtoolbar-mobile"),o.create(o.options.items),t.toolbar=o,o},(e.validations={}).email=function(e){var t=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return!(!e||!t.test(e))},e.validations.length=function(e,t){var n=t.getAttribute("data-length")||5;return e.length>=n},e.validations.required=function(e){return!!e.trim()},e.validations.number=function(t){return e.isNumber(t)},e});