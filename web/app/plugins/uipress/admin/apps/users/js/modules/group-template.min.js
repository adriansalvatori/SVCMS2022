export function moduleData(){return{props:{appdata:Object,folderUpdate:Function,activeFolder:[String,Number],folder:Object,setOpenFolders:Function,openFolders:Array,refreshFolders:Function,updateuserdata:Function},data:function(){return{loading:!0,dragCounter:0}},mounted:function(){},methods:{isFolderOpen(e){return!!this.openFolders.includes(e)},startFolderDrag(e,r){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemID",r.id),e.dataTransfer.setData("type","folder"),jQuery(".uip-remove-folder").addClass("uip-nothidden")},addDropClass(e,r){e.preventDefault();let a=e.target;this.dragCounter++,jQuery(a).hasClass("uip-folder-can-drop")?jQuery(a).addClass("uip-background-primary-wash"):jQuery(a).closest(".uip-folder-can-drop").addClass("uip-background-primary-wash")},dragEnd(e,r){jQuery(".uip-folder-can-drop").removeClass("uip-background-primary-wash"),jQuery(".uip-remove-folder").removeClass("uip-nothidden")},removeDropClass(e,r){e.preventDefault();let a=e.target;this.dragCounter--,0==this.dragCounter&&(jQuery(a).hasClass("uip-folder-can-drop")?jQuery(a).removeClass("uip-background-primary-wash"):jQuery(a).closest(".uip-folder-can-drop").removeClass("uip-background-primary-wash"))},dropInfolder(e,r){this.dragCounter=0;let a=e.dataTransfer.getData("itemID"),o=e.dataTransfer.getData("type");"folder"==o&&this.moveFolder(a,r.id),"content"==o&&this.moveContentToFolder(a,JSON.parse(r.id)),jQuery(".uip-folder-can-drop").removeClass("uip-background-primary-wash"),jQuery(".uip-remove-folder").removeClass("uip-nothidden")},moveFolder(e,r){let a=this,o={action:"uip_move_user_group",security:uip_user_app_ajax.security,folderiD:e,destinationId:r};jQuery.ajax({url:uip_user_app_ajax.ajax_url,type:"post",data:o,success:function(e){o=JSON.parse(e),a.loading=!1,o.error?uipNotification(o.error):(uipNotification(o.message),a.refreshFolders())}})},moveContentToFolder(e,r){let a=JSON.parse(e),o=this,d={action:"uip_move_users_to_group",security:uip_user_app_ajax.security,contentID:a,destinationId:r};jQuery.ajax({url:uip_user_app_ajax.ajax_url,type:"post",data:d,success:function(e){d=JSON.parse(e),o.loading=!1,d.error?uipNotification(d.error):(uipNotification(d.message),o.refreshFolders(),o.updateuserdata())}})}},template:'<div>        <div :class="{\'uip-background-muted uip-text-bold uip-text-emphasis\' : activeFolder == folder.id}"        class="uip-border-round uip-flex uip-padding-xxs uip-text-m hover:uip-background-muted uip-margin-bottom-xxs uip-folder-can-drop"        @dragstart="startFolderDrag($event,folder)"        @dragend="dragEnd($event,folder)"        @drop="dropInfolder($event, folder)"         @dragenter="addDropClass($event, folder)"        @dragleave="removeDropClass($event, folder)"        @dragover.prevent        @dragenter.prevent draggable="true" :folder-id="folder.id">          <span class="material-icons-outlined uip-margin-right-xxs" :style="{\'color\': folder.color}">{{folder.icon}}</span>          <span class="uip-flex-grow uip-cursor-pointer" @click="folderUpdate(folder.id, folder)" >{{folder.title}}</span>          <span class="uip-border-round uip-background-primary-wash uip-padding-left-xxs uip-padding-right-xxs">{{folder.count}}</span>          <span class="uip-w-28 uip-text-right">            <span v-if="folder.subs && !isFolderOpen(folder.id)"            class="material-icons-outlined  uip-cursor-pointer" @click="setOpenFolders(folder.id)">chevron_right</span>            <span v-if="folder.subs && isFolderOpen(folder.id)"            class="material-icons-outlined  uip-cursor-pointer" @click="setOpenFolders(folder.id)">expand_more</span>          </span>        </div>        \x3c!-- IF SUB --\x3e        <div class="uip-margin-left-s" v-if="folder.subs && openFolders.includes(folder.id)">          <template v-for="sub in folder.subs">            <group-template :updateuserdata="updateuserdata" :appdata="appdata" :refreshFolders="refreshFolders" :openFolders="openFolders" :setOpenFolders="setOpenFolders" :folder="sub"            :activeFolder="activeFolder" :folderUpdate="folderUpdate"></group-template>          </template>        </div>      </div>'}};